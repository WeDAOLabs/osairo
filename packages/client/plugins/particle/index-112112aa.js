import{r as ka,s as Ms,v as Rs,a as Ba,b as Aa,c as Ae,d as nt,g as Yi,e as Ji,f as Xi,h as Ia,i as Ma}from"./particle.js";import{P as Uh}from"./particle.js";var pi,$n,jn=0,Wn=0;function Ra(n,t,e){var r=t&&e||0,i=t||new Array(16);n=n||{};var s=n.node||pi,o=n.clockseq!==void 0?n.clockseq:$n;if(s==null||o==null){var f=n.random||(n.rng||ka)();s==null&&(s=pi=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),o==null&&(o=$n=(f[6]<<8|f[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),b=n.nsecs!==void 0?n.nsecs:Wn+1,x=l-jn+(b-Wn)/1e4;if(x<0&&n.clockseq===void 0&&(o=o+1&16383),(x<0||l>jn)&&n.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");jn=l,Wn=b,$n=o,l+=122192928e5;var S=((l&268435455)*1e4+b)%4294967296;i[r++]=S>>>24&255,i[r++]=S>>>16&255,i[r++]=S>>>8&255,i[r++]=S&255;var T=l/4294967296*1e4&268435455;i[r++]=T>>>8&255,i[r++]=T&255,i[r++]=T>>>24&15|16,i[r++]=T>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var M=0;M<6;++M)i[r+M]=s[M];return t||Ms(i)}function Qi(n){if(!Rs(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function La(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Ta="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ca="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function to(n,t,e){function r(i,s,o,f){if(typeof i=="string"&&(i=La(i)),typeof s=="string"&&(s=Qi(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=e(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,o){f=f||0;for(var b=0;b<16;++b)o[f+b]=l[b];return o}return Ms(l)}try{r.name=n}catch{}return r.DNS=Ta,r.URL=Ca,r}function Oa(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Pa(Na(Ua(n),n.length*8))}function Pa(n){for(var t=[],e=n.length*32,r="0123456789abcdef",i=0;i<e;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);t.push(o)}return t}function eo(n){return(n+64>>>9<<4)+14+1}function Na(n,t){n[t>>5]|=128<<t%32,n[eo(t)-1]=t;for(var e=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var f=e,l=r,b=i,x=s;e=ue(e,r,i,s,n[o],7,-680876936),s=ue(s,e,r,i,n[o+1],12,-389564586),i=ue(i,s,e,r,n[o+2],17,606105819),r=ue(r,i,s,e,n[o+3],22,-1044525330),e=ue(e,r,i,s,n[o+4],7,-176418897),s=ue(s,e,r,i,n[o+5],12,1200080426),i=ue(i,s,e,r,n[o+6],17,-1473231341),r=ue(r,i,s,e,n[o+7],22,-45705983),e=ue(e,r,i,s,n[o+8],7,1770035416),s=ue(s,e,r,i,n[o+9],12,-1958414417),i=ue(i,s,e,r,n[o+10],17,-42063),r=ue(r,i,s,e,n[o+11],22,-1990404162),e=ue(e,r,i,s,n[o+12],7,1804603682),s=ue(s,e,r,i,n[o+13],12,-40341101),i=ue(i,s,e,r,n[o+14],17,-1502002290),r=ue(r,i,s,e,n[o+15],22,1236535329),e=fe(e,r,i,s,n[o+1],5,-165796510),s=fe(s,e,r,i,n[o+6],9,-1069501632),i=fe(i,s,e,r,n[o+11],14,643717713),r=fe(r,i,s,e,n[o],20,-373897302),e=fe(e,r,i,s,n[o+5],5,-701558691),s=fe(s,e,r,i,n[o+10],9,38016083),i=fe(i,s,e,r,n[o+15],14,-660478335),r=fe(r,i,s,e,n[o+4],20,-405537848),e=fe(e,r,i,s,n[o+9],5,568446438),s=fe(s,e,r,i,n[o+14],9,-1019803690),i=fe(i,s,e,r,n[o+3],14,-187363961),r=fe(r,i,s,e,n[o+8],20,1163531501),e=fe(e,r,i,s,n[o+13],5,-1444681467),s=fe(s,e,r,i,n[o+2],9,-51403784),i=fe(i,s,e,r,n[o+7],14,1735328473),r=fe(r,i,s,e,n[o+12],20,-1926607734),e=le(e,r,i,s,n[o+5],4,-378558),s=le(s,e,r,i,n[o+8],11,-2022574463),i=le(i,s,e,r,n[o+11],16,1839030562),r=le(r,i,s,e,n[o+14],23,-35309556),e=le(e,r,i,s,n[o+1],4,-1530992060),s=le(s,e,r,i,n[o+4],11,1272893353),i=le(i,s,e,r,n[o+7],16,-155497632),r=le(r,i,s,e,n[o+10],23,-1094730640),e=le(e,r,i,s,n[o+13],4,681279174),s=le(s,e,r,i,n[o],11,-358537222),i=le(i,s,e,r,n[o+3],16,-722521979),r=le(r,i,s,e,n[o+6],23,76029189),e=le(e,r,i,s,n[o+9],4,-640364487),s=le(s,e,r,i,n[o+12],11,-421815835),i=le(i,s,e,r,n[o+15],16,530742520),r=le(r,i,s,e,n[o+2],23,-995338651),e=he(e,r,i,s,n[o],6,-198630844),s=he(s,e,r,i,n[o+7],10,1126891415),i=he(i,s,e,r,n[o+14],15,-1416354905),r=he(r,i,s,e,n[o+5],21,-57434055),e=he(e,r,i,s,n[o+12],6,1700485571),s=he(s,e,r,i,n[o+3],10,-1894986606),i=he(i,s,e,r,n[o+10],15,-1051523),r=he(r,i,s,e,n[o+1],21,-2054922799),e=he(e,r,i,s,n[o+8],6,1873313359),s=he(s,e,r,i,n[o+15],10,-30611744),i=he(i,s,e,r,n[o+6],15,-1560198380),r=he(r,i,s,e,n[o+13],21,1309151649),e=he(e,r,i,s,n[o+4],6,-145523070),s=he(s,e,r,i,n[o+11],10,-1120210379),i=he(i,s,e,r,n[o+2],15,718787259),r=he(r,i,s,e,n[o+9],21,-343485551),e=je(e,f),r=je(r,l),i=je(i,b),s=je(s,x)}return[e,r,i,s]}function Ua(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(eo(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function je(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function qa(n,t){return n<<t|n>>>32-t}function gn(n,t,e,r,i,s){return je(qa(je(je(t,n),je(r,s)),i),e)}function ue(n,t,e,r,i,s,o){return gn(t&e|~t&r,n,t,i,s,o)}function fe(n,t,e,r,i,s,o){return gn(t&r|e&~r,n,t,i,s,o)}function le(n,t,e,r,i,s,o){return gn(t^e^r,n,t,i,s,o)}function he(n,t,e,r,i,s,o){return gn(e^(t|~r),n,t,i,s,o)}var Fa=to("v3",48,Oa);const Da=Fa;function za(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Gn(n,t){return n<<t|n>>>32-t}function Ka(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),f=new Array(o),l=0;l<o;++l){for(var b=new Uint32Array(16),x=0;x<16;++x)b[x]=n[l*64+x*4]<<24|n[l*64+x*4+1]<<16|n[l*64+x*4+2]<<8|n[l*64+x*4+3];f[l]=b}f[o-1][14]=(n.length-1)*8/Math.pow(2,32),f[o-1][14]=Math.floor(f[o-1][14]),f[o-1][15]=(n.length-1)*8&4294967295;for(var S=0;S<o;++S){for(var T=new Uint32Array(80),M=0;M<16;++M)T[M]=f[S][M];for(var k=16;k<80;++k)T[k]=Gn(T[k-3]^T[k-8]^T[k-14]^T[k-16],1);for(var _=e[0],E=e[1],L=e[2],P=e[3],R=e[4],O=0;O<80;++O){var N=Math.floor(O/20),A=Gn(_,5)+za(N,E,L,P)+R+t[N]+T[O]>>>0;R=P,P=L,L=Gn(E,30)>>>0,E=_,_=A}e[0]=e[0]+_>>>0,e[1]=e[1]+E>>>0,e[2]=e[2]+L>>>0,e[3]=e[3]+P>>>0,e[4]=e[4]+R>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ha=to("v5",80,Ka);const $a=Ha,ja="00000000-0000-0000-0000-000000000000";function Wa(n){if(!Rs(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Ga=Object.freeze(Object.defineProperty({__proto__:null,NIL:ja,parse:Qi,stringify:Ms,v1:Ra,v3:Da,v4:Ba,v5:$a,validate:Rs,version:Wa},Symbol.toStringTag,{value:"Module"}));var Mr={},Va={get exports(){return Mr},set exports(n){Mr=n}};(function(n){(function(t,e){function r(v,a){if(!v)throw new Error(a||"Assertion failed")}function i(v,a){v.super_=a;var u=function(){};u.prototype=a.prototype,v.prototype=new u,v.prototype.constructor=v}function s(v,a,u){if(s.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((a==="le"||a==="be")&&(u=a,a=10),this._init(v||0,a||10,u||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Aa.Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,u){return a.cmp(u)>0?a:u},s.min=function(a,u){return a.cmp(u)<0?a:u},s.prototype._init=function(a,u,d){if(typeof a=="number")return this._initNumber(a,u,d);if(typeof a=="object")return this._initArray(a,u,d);u==="hex"&&(u=16),r(u===(u|0)&&u>=2&&u<=36),a=a.toString().replace(/\s+/g,"");var w=0;a[0]==="-"&&(w++,this.negative=1),w<a.length&&(u===16?this._parseHex(a,w,d):(this._parseBase(a,u,w),d==="le"&&this._initArray(this.toArray(),u,d)))},s.prototype._initNumber=function(a,u,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),u,d)},s.prototype._initArray=function(a,u,d){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var y,p,m=0;if(d==="be")for(w=a.length-1,y=0;w>=0;w-=3)p=a[w]|a[w-1]<<8|a[w-2]<<16,this.words[y]|=p<<m&67108863,this.words[y+1]=p>>>26-m&67108863,m+=24,m>=26&&(m-=26,y++);else if(d==="le")for(w=0,y=0;w<a.length;w+=3)p=a[w]|a[w+1]<<8|a[w+2]<<16,this.words[y]|=p<<m&67108863,this.words[y+1]=p>>>26-m&67108863,m+=24,m>=26&&(m-=26,y++);return this._strip()};function f(v,a){var u=v.charCodeAt(a);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;r(!1,"Invalid character in "+v)}function l(v,a,u){var d=f(v,u);return u-1>=a&&(d|=f(v,u-1)<<4),d}s.prototype._parseHex=function(a,u,d){this.length=Math.ceil((a.length-u)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var y=0,p=0,m;if(d==="be")for(w=a.length-1;w>=u;w-=2)m=l(a,u,w)<<y,this.words[p]|=m&67108863,y>=18?(y-=18,p+=1,this.words[p]|=m>>>26):y+=8;else{var h=a.length-u;for(w=h%2===0?u+1:u;w<a.length;w+=2)m=l(a,u,w)<<y,this.words[p]|=m&67108863,y>=18?(y-=18,p+=1,this.words[p]|=m>>>26):y+=8}this._strip()};function b(v,a,u,d){for(var w=0,y=0,p=Math.min(v.length,u),m=a;m<p;m++){var h=v.charCodeAt(m)-48;w*=d,h>=49?y=h-49+10:h>=17?y=h-17+10:y=h,r(h>=0&&y<d,"Invalid character"),w+=y}return w}s.prototype._parseBase=function(a,u,d){this.words=[0],this.length=1;for(var w=0,y=1;y<=67108863;y*=u)w++;w--,y=y/u|0;for(var p=a.length-d,m=p%w,h=Math.min(p,p-m)+d,c=0,g=d;g<h;g+=w)c=b(a,g,g+w,u),this.imuln(y),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(m!==0){var C=1;for(c=b(a,g,a.length,u),g=0;g<m;g++)C*=u;this.imuln(C),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var u=0;u<this.length;u++)a.words[u]=this.words[u];a.length=this.length,a.negative=this.negative,a.red=this.red};function x(v,a){v.words=a.words,v.length=a.length,v.negative=a.negative,v.red=a.red}if(s.prototype._move=function(a){x(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{s.prototype.inspect=S}else s.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],k=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,u){a=a||10,u=u|0||1;var d;if(a===16||a==="hex"){d="";for(var w=0,y=0,p=0;p<this.length;p++){var m=this.words[p],h=((m<<w|y)&16777215).toString(16);y=m>>>24-w&16777215,w+=2,w>=26&&(w-=26,p--),y!==0||p!==this.length-1?d=T[6-h.length]+h+d:d=h+d}for(y!==0&&(d=y.toString(16)+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var c=M[a],g=k[a];d="";var C=this.clone();for(C.negative=0;!C.isZero();){var D=C.modrn(g).toString(a);C=C.idivn(g),C.isZero()?d=D+d:d=T[c-D.length]+D+d}for(this.isZero()&&(d="0"+d);d.length%u!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,u){return this.toArrayLike(o,a,u)}),s.prototype.toArray=function(a,u){return this.toArrayLike(Array,a,u)};var _=function(a,u){return a.allocUnsafe?a.allocUnsafe(u):new a(u)};s.prototype.toArrayLike=function(a,u,d){this._strip();var w=this.byteLength(),y=d||Math.max(1,w);r(w<=y,"byte array longer than desired length"),r(y>0,"Requested array length <= 0");var p=_(a,y),m=u==="le"?"LE":"BE";return this["_toArrayLike"+m](p,w),p},s.prototype._toArrayLikeLE=function(a,u){for(var d=0,w=0,y=0,p=0;y<this.length;y++){var m=this.words[y]<<p|w;a[d++]=m&255,d<a.length&&(a[d++]=m>>8&255),d<a.length&&(a[d++]=m>>16&255),p===6?(d<a.length&&(a[d++]=m>>24&255),w=0,p=0):(w=m>>>24,p+=2)}if(d<a.length)for(a[d++]=w;d<a.length;)a[d++]=0},s.prototype._toArrayLikeBE=function(a,u){for(var d=a.length-1,w=0,y=0,p=0;y<this.length;y++){var m=this.words[y]<<p|w;a[d--]=m&255,d>=0&&(a[d--]=m>>8&255),d>=0&&(a[d--]=m>>16&255),p===6?(d>=0&&(a[d--]=m>>24&255),w=0,p=0):(w=m>>>24,p+=2)}if(d>=0)for(a[d--]=w;d>=0;)a[d--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var u=a,d=0;return u>=4096&&(d+=13,u>>>=13),u>=64&&(d+=7,u>>>=7),u>=8&&(d+=4,u>>>=4),u>=2&&(d+=2,u>>>=2),d+u},s.prototype._zeroBits=function(a){if(a===0)return 26;var u=a,d=0;return u&8191||(d+=13,u>>>=13),u&127||(d+=7,u>>>=7),u&15||(d+=4,u>>>=4),u&3||(d+=2,u>>>=2),u&1||d++,d},s.prototype.bitLength=function(){var a=this.words[this.length-1],u=this._countBits(a);return(this.length-1)*26+u};function E(v){for(var a=new Array(v.bitLength()),u=0;u<a.length;u++){var d=u/26|0,w=u%26;a[u]=v.words[d]>>>w&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,u=0;u<this.length;u++){var d=this._zeroBits(this.words[u]);if(a+=d,d!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var u=0;u<a.length;u++)this.words[u]=this.words[u]|a.words[u];return this._strip()},s.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var u;this.length>a.length?u=a:u=this;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=u.length,this._strip()},s.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var u,d;this.length>a.length?(u=this,d=a):(u=a,d=this);for(var w=0;w<d.length;w++)this.words[w]=u.words[w]^d.words[w];if(this!==u)for(;w<u.length;w++)this.words[w]=u.words[w];return this.length=u.length,this._strip()},s.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var u=Math.ceil(a/26)|0,d=a%26;this._expand(u),d>0&&u--;for(var w=0;w<u;w++)this.words[w]=~this.words[w]&67108863;return d>0&&(this.words[w]=~this.words[w]&67108863>>26-d),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,u){r(typeof a=="number"&&a>=0);var d=a/26|0,w=a%26;return this._expand(d+1),u?this.words[d]=this.words[d]|1<<w:this.words[d]=this.words[d]&~(1<<w),this._strip()},s.prototype.iadd=function(a){var u;if(this.negative!==0&&a.negative===0)return this.negative=0,u=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,u=this.isub(a),a.negative=1,u._normSign();var d,w;this.length>a.length?(d=this,w=a):(d=a,w=this);for(var y=0,p=0;p<w.length;p++)u=(d.words[p]|0)+(w.words[p]|0)+y,this.words[p]=u&67108863,y=u>>>26;for(;y!==0&&p<d.length;p++)u=(d.words[p]|0)+y,this.words[p]=u&67108863,y=u>>>26;if(this.length=d.length,y!==0)this.words[this.length]=y,this.length++;else if(d!==this)for(;p<d.length;p++)this.words[p]=d.words[p];return this},s.prototype.add=function(a){var u;return a.negative!==0&&this.negative===0?(a.negative=0,u=this.sub(a),a.negative^=1,u):a.negative===0&&this.negative!==0?(this.negative=0,u=a.sub(this),this.negative=1,u):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var u=this.iadd(a);return a.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,y;d>0?(w=this,y=a):(w=a,y=this);for(var p=0,m=0;m<y.length;m++)u=(w.words[m]|0)-(y.words[m]|0)+p,p=u>>26,this.words[m]=u&67108863;for(;p!==0&&m<w.length;m++)u=(w.words[m]|0)+p,p=u>>26,this.words[m]=u&67108863;if(p===0&&m<w.length&&w!==this)for(;m<w.length;m++)this.words[m]=w.words[m];return this.length=Math.max(this.length,m),w!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function L(v,a,u){u.negative=a.negative^v.negative;var d=v.length+a.length|0;u.length=d,d=d-1|0;var w=v.words[0]|0,y=a.words[0]|0,p=w*y,m=p&67108863,h=p/67108864|0;u.words[0]=m;for(var c=1;c<d;c++){for(var g=h>>>26,C=h&67108863,D=Math.min(c,a.length-1),z=Math.max(0,c-v.length+1);z<=D;z++){var V=c-z|0;w=v.words[V]|0,y=a.words[z]|0,p=w*y+C,g+=p/67108864|0,C=p&67108863}u.words[c]=C|0,h=g|0}return h!==0?u.words[c]=h|0:u.length--,u._strip()}var P=function(a,u,d){var w=a.words,y=u.words,p=d.words,m=0,h,c,g,C=w[0]|0,D=C&8191,z=C>>>13,V=w[1]|0,Q=V&8191,X=V>>>13,pt=w[2]|0,at=pt&8191,st=pt>>>13,se=w[3]|0,ht=se&8191,gt=se>>>13,Fe=w[4]|0,bt=Fe&8191,Bt=Fe>>>13,Fr=w[5]|0,At=Fr&8191,It=Fr>>>13,Sr=w[6]|0,vt=Sr&8191,mt=Sr>>>13,Er=w[7]|0,xt=Er&8191,_t=Er>>>13,kr=w[8]|0,St=kr&8191,Mt=kr>>>13,Dr=w[9]|0,Rt=Dr&8191,Lt=Dr>>>13,si=y[0]|0,Nt=si&8191,Ut=si>>>13,ii=y[1]|0,qt=ii&8191,Ft=ii>>>13,oi=y[2]|0,Dt=oi&8191,zt=oi>>>13,ai=y[3]|0,Kt=ai&8191,Ht=ai>>>13,ci=y[4]|0,$t=ci&8191,jt=ci>>>13,ui=y[5]|0,Wt=ui&8191,Gt=ui>>>13,fi=y[6]|0,Vt=fi&8191,Zt=fi>>>13,li=y[7]|0,Yt=li&8191,Jt=li>>>13,hi=y[8]|0,Xt=hi&8191,Qt=hi>>>13,di=y[9]|0,te=di&8191,ee=di>>>13;d.negative=a.negative^u.negative,d.length=19,h=Math.imul(D,Nt),c=Math.imul(D,Ut),c=c+Math.imul(z,Nt)|0,g=Math.imul(z,Ut);var kn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(kn>>>26)|0,kn&=67108863,h=Math.imul(Q,Nt),c=Math.imul(Q,Ut),c=c+Math.imul(X,Nt)|0,g=Math.imul(X,Ut),h=h+Math.imul(D,qt)|0,c=c+Math.imul(D,Ft)|0,c=c+Math.imul(z,qt)|0,g=g+Math.imul(z,Ft)|0;var Bn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,h=Math.imul(at,Nt),c=Math.imul(at,Ut),c=c+Math.imul(st,Nt)|0,g=Math.imul(st,Ut),h=h+Math.imul(Q,qt)|0,c=c+Math.imul(Q,Ft)|0,c=c+Math.imul(X,qt)|0,g=g+Math.imul(X,Ft)|0,h=h+Math.imul(D,Dt)|0,c=c+Math.imul(D,zt)|0,c=c+Math.imul(z,Dt)|0,g=g+Math.imul(z,zt)|0;var An=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(An>>>26)|0,An&=67108863,h=Math.imul(ht,Nt),c=Math.imul(ht,Ut),c=c+Math.imul(gt,Nt)|0,g=Math.imul(gt,Ut),h=h+Math.imul(at,qt)|0,c=c+Math.imul(at,Ft)|0,c=c+Math.imul(st,qt)|0,g=g+Math.imul(st,Ft)|0,h=h+Math.imul(Q,Dt)|0,c=c+Math.imul(Q,zt)|0,c=c+Math.imul(X,Dt)|0,g=g+Math.imul(X,zt)|0,h=h+Math.imul(D,Kt)|0,c=c+Math.imul(D,Ht)|0,c=c+Math.imul(z,Kt)|0,g=g+Math.imul(z,Ht)|0;var In=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(In>>>26)|0,In&=67108863,h=Math.imul(bt,Nt),c=Math.imul(bt,Ut),c=c+Math.imul(Bt,Nt)|0,g=Math.imul(Bt,Ut),h=h+Math.imul(ht,qt)|0,c=c+Math.imul(ht,Ft)|0,c=c+Math.imul(gt,qt)|0,g=g+Math.imul(gt,Ft)|0,h=h+Math.imul(at,Dt)|0,c=c+Math.imul(at,zt)|0,c=c+Math.imul(st,Dt)|0,g=g+Math.imul(st,zt)|0,h=h+Math.imul(Q,Kt)|0,c=c+Math.imul(Q,Ht)|0,c=c+Math.imul(X,Kt)|0,g=g+Math.imul(X,Ht)|0,h=h+Math.imul(D,$t)|0,c=c+Math.imul(D,jt)|0,c=c+Math.imul(z,$t)|0,g=g+Math.imul(z,jt)|0;var Mn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,h=Math.imul(At,Nt),c=Math.imul(At,Ut),c=c+Math.imul(It,Nt)|0,g=Math.imul(It,Ut),h=h+Math.imul(bt,qt)|0,c=c+Math.imul(bt,Ft)|0,c=c+Math.imul(Bt,qt)|0,g=g+Math.imul(Bt,Ft)|0,h=h+Math.imul(ht,Dt)|0,c=c+Math.imul(ht,zt)|0,c=c+Math.imul(gt,Dt)|0,g=g+Math.imul(gt,zt)|0,h=h+Math.imul(at,Kt)|0,c=c+Math.imul(at,Ht)|0,c=c+Math.imul(st,Kt)|0,g=g+Math.imul(st,Ht)|0,h=h+Math.imul(Q,$t)|0,c=c+Math.imul(Q,jt)|0,c=c+Math.imul(X,$t)|0,g=g+Math.imul(X,jt)|0,h=h+Math.imul(D,Wt)|0,c=c+Math.imul(D,Gt)|0,c=c+Math.imul(z,Wt)|0,g=g+Math.imul(z,Gt)|0;var Rn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,h=Math.imul(vt,Nt),c=Math.imul(vt,Ut),c=c+Math.imul(mt,Nt)|0,g=Math.imul(mt,Ut),h=h+Math.imul(At,qt)|0,c=c+Math.imul(At,Ft)|0,c=c+Math.imul(It,qt)|0,g=g+Math.imul(It,Ft)|0,h=h+Math.imul(bt,Dt)|0,c=c+Math.imul(bt,zt)|0,c=c+Math.imul(Bt,Dt)|0,g=g+Math.imul(Bt,zt)|0,h=h+Math.imul(ht,Kt)|0,c=c+Math.imul(ht,Ht)|0,c=c+Math.imul(gt,Kt)|0,g=g+Math.imul(gt,Ht)|0,h=h+Math.imul(at,$t)|0,c=c+Math.imul(at,jt)|0,c=c+Math.imul(st,$t)|0,g=g+Math.imul(st,jt)|0,h=h+Math.imul(Q,Wt)|0,c=c+Math.imul(Q,Gt)|0,c=c+Math.imul(X,Wt)|0,g=g+Math.imul(X,Gt)|0,h=h+Math.imul(D,Vt)|0,c=c+Math.imul(D,Zt)|0,c=c+Math.imul(z,Vt)|0,g=g+Math.imul(z,Zt)|0;var Ln=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,h=Math.imul(xt,Nt),c=Math.imul(xt,Ut),c=c+Math.imul(_t,Nt)|0,g=Math.imul(_t,Ut),h=h+Math.imul(vt,qt)|0,c=c+Math.imul(vt,Ft)|0,c=c+Math.imul(mt,qt)|0,g=g+Math.imul(mt,Ft)|0,h=h+Math.imul(At,Dt)|0,c=c+Math.imul(At,zt)|0,c=c+Math.imul(It,Dt)|0,g=g+Math.imul(It,zt)|0,h=h+Math.imul(bt,Kt)|0,c=c+Math.imul(bt,Ht)|0,c=c+Math.imul(Bt,Kt)|0,g=g+Math.imul(Bt,Ht)|0,h=h+Math.imul(ht,$t)|0,c=c+Math.imul(ht,jt)|0,c=c+Math.imul(gt,$t)|0,g=g+Math.imul(gt,jt)|0,h=h+Math.imul(at,Wt)|0,c=c+Math.imul(at,Gt)|0,c=c+Math.imul(st,Wt)|0,g=g+Math.imul(st,Gt)|0,h=h+Math.imul(Q,Vt)|0,c=c+Math.imul(Q,Zt)|0,c=c+Math.imul(X,Vt)|0,g=g+Math.imul(X,Zt)|0,h=h+Math.imul(D,Yt)|0,c=c+Math.imul(D,Jt)|0,c=c+Math.imul(z,Yt)|0,g=g+Math.imul(z,Jt)|0;var Tn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,h=Math.imul(St,Nt),c=Math.imul(St,Ut),c=c+Math.imul(Mt,Nt)|0,g=Math.imul(Mt,Ut),h=h+Math.imul(xt,qt)|0,c=c+Math.imul(xt,Ft)|0,c=c+Math.imul(_t,qt)|0,g=g+Math.imul(_t,Ft)|0,h=h+Math.imul(vt,Dt)|0,c=c+Math.imul(vt,zt)|0,c=c+Math.imul(mt,Dt)|0,g=g+Math.imul(mt,zt)|0,h=h+Math.imul(At,Kt)|0,c=c+Math.imul(At,Ht)|0,c=c+Math.imul(It,Kt)|0,g=g+Math.imul(It,Ht)|0,h=h+Math.imul(bt,$t)|0,c=c+Math.imul(bt,jt)|0,c=c+Math.imul(Bt,$t)|0,g=g+Math.imul(Bt,jt)|0,h=h+Math.imul(ht,Wt)|0,c=c+Math.imul(ht,Gt)|0,c=c+Math.imul(gt,Wt)|0,g=g+Math.imul(gt,Gt)|0,h=h+Math.imul(at,Vt)|0,c=c+Math.imul(at,Zt)|0,c=c+Math.imul(st,Vt)|0,g=g+Math.imul(st,Zt)|0,h=h+Math.imul(Q,Yt)|0,c=c+Math.imul(Q,Jt)|0,c=c+Math.imul(X,Yt)|0,g=g+Math.imul(X,Jt)|0,h=h+Math.imul(D,Xt)|0,c=c+Math.imul(D,Qt)|0,c=c+Math.imul(z,Xt)|0,g=g+Math.imul(z,Qt)|0;var Cn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,h=Math.imul(Rt,Nt),c=Math.imul(Rt,Ut),c=c+Math.imul(Lt,Nt)|0,g=Math.imul(Lt,Ut),h=h+Math.imul(St,qt)|0,c=c+Math.imul(St,Ft)|0,c=c+Math.imul(Mt,qt)|0,g=g+Math.imul(Mt,Ft)|0,h=h+Math.imul(xt,Dt)|0,c=c+Math.imul(xt,zt)|0,c=c+Math.imul(_t,Dt)|0,g=g+Math.imul(_t,zt)|0,h=h+Math.imul(vt,Kt)|0,c=c+Math.imul(vt,Ht)|0,c=c+Math.imul(mt,Kt)|0,g=g+Math.imul(mt,Ht)|0,h=h+Math.imul(At,$t)|0,c=c+Math.imul(At,jt)|0,c=c+Math.imul(It,$t)|0,g=g+Math.imul(It,jt)|0,h=h+Math.imul(bt,Wt)|0,c=c+Math.imul(bt,Gt)|0,c=c+Math.imul(Bt,Wt)|0,g=g+Math.imul(Bt,Gt)|0,h=h+Math.imul(ht,Vt)|0,c=c+Math.imul(ht,Zt)|0,c=c+Math.imul(gt,Vt)|0,g=g+Math.imul(gt,Zt)|0,h=h+Math.imul(at,Yt)|0,c=c+Math.imul(at,Jt)|0,c=c+Math.imul(st,Yt)|0,g=g+Math.imul(st,Jt)|0,h=h+Math.imul(Q,Xt)|0,c=c+Math.imul(Q,Qt)|0,c=c+Math.imul(X,Xt)|0,g=g+Math.imul(X,Qt)|0,h=h+Math.imul(D,te)|0,c=c+Math.imul(D,ee)|0,c=c+Math.imul(z,te)|0,g=g+Math.imul(z,ee)|0;var On=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(On>>>26)|0,On&=67108863,h=Math.imul(Rt,qt),c=Math.imul(Rt,Ft),c=c+Math.imul(Lt,qt)|0,g=Math.imul(Lt,Ft),h=h+Math.imul(St,Dt)|0,c=c+Math.imul(St,zt)|0,c=c+Math.imul(Mt,Dt)|0,g=g+Math.imul(Mt,zt)|0,h=h+Math.imul(xt,Kt)|0,c=c+Math.imul(xt,Ht)|0,c=c+Math.imul(_t,Kt)|0,g=g+Math.imul(_t,Ht)|0,h=h+Math.imul(vt,$t)|0,c=c+Math.imul(vt,jt)|0,c=c+Math.imul(mt,$t)|0,g=g+Math.imul(mt,jt)|0,h=h+Math.imul(At,Wt)|0,c=c+Math.imul(At,Gt)|0,c=c+Math.imul(It,Wt)|0,g=g+Math.imul(It,Gt)|0,h=h+Math.imul(bt,Vt)|0,c=c+Math.imul(bt,Zt)|0,c=c+Math.imul(Bt,Vt)|0,g=g+Math.imul(Bt,Zt)|0,h=h+Math.imul(ht,Yt)|0,c=c+Math.imul(ht,Jt)|0,c=c+Math.imul(gt,Yt)|0,g=g+Math.imul(gt,Jt)|0,h=h+Math.imul(at,Xt)|0,c=c+Math.imul(at,Qt)|0,c=c+Math.imul(st,Xt)|0,g=g+Math.imul(st,Qt)|0,h=h+Math.imul(Q,te)|0,c=c+Math.imul(Q,ee)|0,c=c+Math.imul(X,te)|0,g=g+Math.imul(X,ee)|0;var Pn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,h=Math.imul(Rt,Dt),c=Math.imul(Rt,zt),c=c+Math.imul(Lt,Dt)|0,g=Math.imul(Lt,zt),h=h+Math.imul(St,Kt)|0,c=c+Math.imul(St,Ht)|0,c=c+Math.imul(Mt,Kt)|0,g=g+Math.imul(Mt,Ht)|0,h=h+Math.imul(xt,$t)|0,c=c+Math.imul(xt,jt)|0,c=c+Math.imul(_t,$t)|0,g=g+Math.imul(_t,jt)|0,h=h+Math.imul(vt,Wt)|0,c=c+Math.imul(vt,Gt)|0,c=c+Math.imul(mt,Wt)|0,g=g+Math.imul(mt,Gt)|0,h=h+Math.imul(At,Vt)|0,c=c+Math.imul(At,Zt)|0,c=c+Math.imul(It,Vt)|0,g=g+Math.imul(It,Zt)|0,h=h+Math.imul(bt,Yt)|0,c=c+Math.imul(bt,Jt)|0,c=c+Math.imul(Bt,Yt)|0,g=g+Math.imul(Bt,Jt)|0,h=h+Math.imul(ht,Xt)|0,c=c+Math.imul(ht,Qt)|0,c=c+Math.imul(gt,Xt)|0,g=g+Math.imul(gt,Qt)|0,h=h+Math.imul(at,te)|0,c=c+Math.imul(at,ee)|0,c=c+Math.imul(st,te)|0,g=g+Math.imul(st,ee)|0;var Nn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,h=Math.imul(Rt,Kt),c=Math.imul(Rt,Ht),c=c+Math.imul(Lt,Kt)|0,g=Math.imul(Lt,Ht),h=h+Math.imul(St,$t)|0,c=c+Math.imul(St,jt)|0,c=c+Math.imul(Mt,$t)|0,g=g+Math.imul(Mt,jt)|0,h=h+Math.imul(xt,Wt)|0,c=c+Math.imul(xt,Gt)|0,c=c+Math.imul(_t,Wt)|0,g=g+Math.imul(_t,Gt)|0,h=h+Math.imul(vt,Vt)|0,c=c+Math.imul(vt,Zt)|0,c=c+Math.imul(mt,Vt)|0,g=g+Math.imul(mt,Zt)|0,h=h+Math.imul(At,Yt)|0,c=c+Math.imul(At,Jt)|0,c=c+Math.imul(It,Yt)|0,g=g+Math.imul(It,Jt)|0,h=h+Math.imul(bt,Xt)|0,c=c+Math.imul(bt,Qt)|0,c=c+Math.imul(Bt,Xt)|0,g=g+Math.imul(Bt,Qt)|0,h=h+Math.imul(ht,te)|0,c=c+Math.imul(ht,ee)|0,c=c+Math.imul(gt,te)|0,g=g+Math.imul(gt,ee)|0;var Un=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Un>>>26)|0,Un&=67108863,h=Math.imul(Rt,$t),c=Math.imul(Rt,jt),c=c+Math.imul(Lt,$t)|0,g=Math.imul(Lt,jt),h=h+Math.imul(St,Wt)|0,c=c+Math.imul(St,Gt)|0,c=c+Math.imul(Mt,Wt)|0,g=g+Math.imul(Mt,Gt)|0,h=h+Math.imul(xt,Vt)|0,c=c+Math.imul(xt,Zt)|0,c=c+Math.imul(_t,Vt)|0,g=g+Math.imul(_t,Zt)|0,h=h+Math.imul(vt,Yt)|0,c=c+Math.imul(vt,Jt)|0,c=c+Math.imul(mt,Yt)|0,g=g+Math.imul(mt,Jt)|0,h=h+Math.imul(At,Xt)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(It,Xt)|0,g=g+Math.imul(It,Qt)|0,h=h+Math.imul(bt,te)|0,c=c+Math.imul(bt,ee)|0,c=c+Math.imul(Bt,te)|0,g=g+Math.imul(Bt,ee)|0;var qn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(qn>>>26)|0,qn&=67108863,h=Math.imul(Rt,Wt),c=Math.imul(Rt,Gt),c=c+Math.imul(Lt,Wt)|0,g=Math.imul(Lt,Gt),h=h+Math.imul(St,Vt)|0,c=c+Math.imul(St,Zt)|0,c=c+Math.imul(Mt,Vt)|0,g=g+Math.imul(Mt,Zt)|0,h=h+Math.imul(xt,Yt)|0,c=c+Math.imul(xt,Jt)|0,c=c+Math.imul(_t,Yt)|0,g=g+Math.imul(_t,Jt)|0,h=h+Math.imul(vt,Xt)|0,c=c+Math.imul(vt,Qt)|0,c=c+Math.imul(mt,Xt)|0,g=g+Math.imul(mt,Qt)|0,h=h+Math.imul(At,te)|0,c=c+Math.imul(At,ee)|0,c=c+Math.imul(It,te)|0,g=g+Math.imul(It,ee)|0;var Fn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,h=Math.imul(Rt,Vt),c=Math.imul(Rt,Zt),c=c+Math.imul(Lt,Vt)|0,g=Math.imul(Lt,Zt),h=h+Math.imul(St,Yt)|0,c=c+Math.imul(St,Jt)|0,c=c+Math.imul(Mt,Yt)|0,g=g+Math.imul(Mt,Jt)|0,h=h+Math.imul(xt,Xt)|0,c=c+Math.imul(xt,Qt)|0,c=c+Math.imul(_t,Xt)|0,g=g+Math.imul(_t,Qt)|0,h=h+Math.imul(vt,te)|0,c=c+Math.imul(vt,ee)|0,c=c+Math.imul(mt,te)|0,g=g+Math.imul(mt,ee)|0;var Dn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,h=Math.imul(Rt,Yt),c=Math.imul(Rt,Jt),c=c+Math.imul(Lt,Yt)|0,g=Math.imul(Lt,Jt),h=h+Math.imul(St,Xt)|0,c=c+Math.imul(St,Qt)|0,c=c+Math.imul(Mt,Xt)|0,g=g+Math.imul(Mt,Qt)|0,h=h+Math.imul(xt,te)|0,c=c+Math.imul(xt,ee)|0,c=c+Math.imul(_t,te)|0,g=g+Math.imul(_t,ee)|0;var zn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(zn>>>26)|0,zn&=67108863,h=Math.imul(Rt,Xt),c=Math.imul(Rt,Qt),c=c+Math.imul(Lt,Xt)|0,g=Math.imul(Lt,Qt),h=h+Math.imul(St,te)|0,c=c+Math.imul(St,ee)|0,c=c+Math.imul(Mt,te)|0,g=g+Math.imul(Mt,ee)|0;var Kn=(m+h|0)+((c&8191)<<13)|0;m=(g+(c>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,h=Math.imul(Rt,te),c=Math.imul(Rt,ee),c=c+Math.imul(Lt,te)|0,g=Math.imul(Lt,ee);var Hn=(m+h|0)+((c&8191)<<13)|0;return m=(g+(c>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,p[0]=kn,p[1]=Bn,p[2]=An,p[3]=In,p[4]=Mn,p[5]=Rn,p[6]=Ln,p[7]=Tn,p[8]=Cn,p[9]=On,p[10]=Pn,p[11]=Nn,p[12]=Un,p[13]=qn,p[14]=Fn,p[15]=Dn,p[16]=zn,p[17]=Kn,p[18]=Hn,m!==0&&(p[19]=m,d.length++),d};Math.imul||(P=L);function R(v,a,u){u.negative=a.negative^v.negative,u.length=v.length+a.length;for(var d=0,w=0,y=0;y<u.length-1;y++){var p=w;w=0;for(var m=d&67108863,h=Math.min(y,a.length-1),c=Math.max(0,y-v.length+1);c<=h;c++){var g=y-c,C=v.words[g]|0,D=a.words[c]|0,z=C*D,V=z&67108863;p=p+(z/67108864|0)|0,V=V+m|0,m=V&67108863,p=p+(V>>>26)|0,w+=p>>>26,p&=67108863}u.words[y]=m,d=p,p=w}return d!==0?u.words[y]=d:u.length--,u._strip()}function O(v,a,u){return R(v,a,u)}s.prototype.mulTo=function(a,u){var d,w=this.length+a.length;return this.length===10&&a.length===10?d=P(this,a,u):w<63?d=L(this,a,u):w<1024?d=R(this,a,u):d=O(this,a,u),d},s.prototype.mul=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),this.mulTo(a,u)},s.prototype.mulf=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),O(this,a,u)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var u=a<0;u&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var d=0,w=0;w<this.length;w++){var y=(this.words[w]|0)*a,p=(y&67108863)+(d&67108863);d>>=26,d+=y/67108864|0,d+=p>>>26,this.words[w]=p&67108863}return d!==0&&(this.words[w]=d,this.length++),u?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var u=E(a);if(u.length===0)return new s(1);for(var d=this,w=0;w<u.length&&u[w]===0;w++,d=d.sqr());if(++w<u.length)for(var y=d.sqr();w<u.length;w++,y=y.sqr())u[w]!==0&&(d=d.mul(y));return d},s.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var u=a%26,d=(a-u)/26,w=67108863>>>26-u<<26-u,y;if(u!==0){var p=0;for(y=0;y<this.length;y++){var m=this.words[y]&w,h=(this.words[y]|0)-m<<u;this.words[y]=h|p,p=m>>>26-u}p&&(this.words[y]=p,this.length++)}if(d!==0){for(y=this.length-1;y>=0;y--)this.words[y+d]=this.words[y];for(y=0;y<d;y++)this.words[y]=0;this.length+=d}return this._strip()},s.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,u,d){r(typeof a=="number"&&a>=0);var w;u?w=(u-u%26)/26:w=0;var y=a%26,p=Math.min((a-y)/26,this.length),m=67108863^67108863>>>y<<y,h=d;if(w-=p,w=Math.max(0,w),h){for(var c=0;c<p;c++)h.words[c]=this.words[c];h.length=p}if(p!==0)if(this.length>p)for(this.length-=p,c=0;c<this.length;c++)this.words[c]=this.words[c+p];else this.words[0]=0,this.length=1;var g=0;for(c=this.length-1;c>=0&&(g!==0||c>=w);c--){var C=this.words[c]|0;this.words[c]=g<<26-y|C>>>y,g=C&m}return h&&g!==0&&(h.words[h.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,u,d){return r(this.negative===0),this.iushrn(a,u,d)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var u=a%26,d=(a-u)/26,w=1<<u;if(this.length<=d)return!1;var y=this.words[d];return!!(y&w)},s.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var u=a%26,d=(a-u)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(u!==0&&d++,this.length=Math.min(d,this.length),u!==0){var w=67108863^67108863>>>u<<u;this.words[this.length-1]&=w}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,u,d){var w=a.length+d,y;this._expand(w);var p,m=0;for(y=0;y<a.length;y++){p=(this.words[y+d]|0)+m;var h=(a.words[y]|0)*u;p-=h&67108863,m=(p>>26)-(h/67108864|0),this.words[y+d]=p&67108863}for(;y<this.length-d;y++)p=(this.words[y+d]|0)+m,m=p>>26,this.words[y+d]=p&67108863;if(m===0)return this._strip();for(r(m===-1),m=0,y=0;y<this.length;y++)p=-(this.words[y]|0)+m,m=p>>26,this.words[y]=p&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,u){var d=this.length-a.length,w=this.clone(),y=a,p=y.words[y.length-1]|0,m=this._countBits(p);d=26-m,d!==0&&(y=y.ushln(d),w.iushln(d),p=y.words[y.length-1]|0);var h=w.length-y.length,c;if(u!=="mod"){c=new s(null),c.length=h+1,c.words=new Array(c.length);for(var g=0;g<c.length;g++)c.words[g]=0}var C=w.clone()._ishlnsubmul(y,1,h);C.negative===0&&(w=C,c&&(c.words[h]=1));for(var D=h-1;D>=0;D--){var z=(w.words[y.length+D]|0)*67108864+(w.words[y.length+D-1]|0);for(z=Math.min(z/p|0,67108863),w._ishlnsubmul(y,z,D);w.negative!==0;)z--,w.negative=0,w._ishlnsubmul(y,1,D),w.isZero()||(w.negative^=1);c&&(c.words[D]=z)}return c&&c._strip(),w._strip(),u!=="div"&&d!==0&&w.iushrn(d),{div:c||null,mod:w}},s.prototype.divmod=function(a,u,d){if(r(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,y,p;return this.negative!==0&&a.negative===0?(p=this.neg().divmod(a,u),u!=="mod"&&(w=p.div.neg()),u!=="div"&&(y=p.mod.neg(),d&&y.negative!==0&&y.iadd(a)),{div:w,mod:y}):this.negative===0&&a.negative!==0?(p=this.divmod(a.neg(),u),u!=="mod"&&(w=p.div.neg()),{div:w,mod:p.mod}):this.negative&a.negative?(p=this.neg().divmod(a.neg(),u),u!=="div"&&(y=p.mod.neg(),d&&y.negative!==0&&y.isub(a)),{div:p.div,mod:y}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?u==="div"?{div:this.divn(a.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,u)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var u=this.divmod(a);if(u.mod.isZero())return u.div;var d=u.div.negative!==0?u.mod.isub(a):u.mod,w=a.ushrn(1),y=a.andln(1),p=d.cmp(w);return p<0||y===1&&p===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(a){var u=a<0;u&&(a=-a),r(a<=67108863);for(var d=(1<<26)%a,w=0,y=this.length-1;y>=0;y--)w=(d*w+(this.words[y]|0))%a;return u?-w:w},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var u=a<0;u&&(a=-a),r(a<=67108863);for(var d=0,w=this.length-1;w>=0;w--){var y=(this.words[w]|0)+d*67108864;this.words[w]=y/a|0,d=y%a}return this._strip(),u?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var u=this,d=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var w=new s(1),y=new s(0),p=new s(0),m=new s(1),h=0;u.isEven()&&d.isEven();)u.iushrn(1),d.iushrn(1),++h;for(var c=d.clone(),g=u.clone();!u.isZero();){for(var C=0,D=1;!(u.words[0]&D)&&C<26;++C,D<<=1);if(C>0)for(u.iushrn(C);C-- >0;)(w.isOdd()||y.isOdd())&&(w.iadd(c),y.isub(g)),w.iushrn(1),y.iushrn(1);for(var z=0,V=1;!(d.words[0]&V)&&z<26;++z,V<<=1);if(z>0)for(d.iushrn(z);z-- >0;)(p.isOdd()||m.isOdd())&&(p.iadd(c),m.isub(g)),p.iushrn(1),m.iushrn(1);u.cmp(d)>=0?(u.isub(d),w.isub(p),y.isub(m)):(d.isub(u),p.isub(w),m.isub(y))}return{a:p,b:m,gcd:d.iushln(h)}},s.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var u=this,d=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var w=new s(1),y=new s(0),p=d.clone();u.cmpn(1)>0&&d.cmpn(1)>0;){for(var m=0,h=1;!(u.words[0]&h)&&m<26;++m,h<<=1);if(m>0)for(u.iushrn(m);m-- >0;)w.isOdd()&&w.iadd(p),w.iushrn(1);for(var c=0,g=1;!(d.words[0]&g)&&c<26;++c,g<<=1);if(c>0)for(d.iushrn(c);c-- >0;)y.isOdd()&&y.iadd(p),y.iushrn(1);u.cmp(d)>=0?(u.isub(d),w.isub(y)):(d.isub(u),y.isub(w))}var C;return u.cmpn(1)===0?C=w:C=y,C.cmpn(0)<0&&C.iadd(a),C},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var u=this.clone(),d=a.clone();u.negative=0,d.negative=0;for(var w=0;u.isEven()&&d.isEven();w++)u.iushrn(1),d.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;d.isEven();)d.iushrn(1);var y=u.cmp(d);if(y<0){var p=u;u=d,d=p}else if(y===0||d.cmpn(1)===0)break;u.isub(d)}while(!0);return d.iushln(w)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){r(typeof a=="number");var u=a%26,d=(a-u)/26,w=1<<u;if(this.length<=d)return this._expand(d+1),this.words[d]|=w,this;for(var y=w,p=d;y!==0&&p<this.length;p++){var m=this.words[p]|0;m+=y,y=m>>>26,m&=67108863,this.words[p]=m}return y!==0&&(this.words[p]=y,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var u=a<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var d;if(this.length>1)d=1;else{u&&(a=-a),r(a<=67108863,"Number is too big");var w=this.words[0]|0;d=w===a?0:w<a?-1:1}return this.negative!==0?-d|0:d},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var u=this.ucmp(a);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var u=0,d=this.length-1;d>=0;d--){var w=this.words[d]|0,y=a.words[d]|0;if(w!==y){w<y?u=-1:w>y&&(u=1);break}}return u},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new j(a)},s.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var N={k256:null,p224:null,p192:null,p25519:null};function A(v,a){this.name=v,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},A.prototype.ireduce=function(a){var u=a,d;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),d=u.bitLength();while(d>this.n);var w=d<this.n?-1:u.ucmp(this.p);return w===0?(u.words[0]=0,u.length=1):w>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},A.prototype.split=function(a,u){a.iushrn(this.n,0,u)},A.prototype.imulK=function(a){return a.imul(this.k)};function q(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(q,A),q.prototype.split=function(a,u){for(var d=4194303,w=Math.min(a.length,9),y=0;y<w;y++)u.words[y]=a.words[y];if(u.length=w,a.length<=9){a.words[0]=0,a.length=1;return}var p=a.words[9];for(u.words[u.length++]=p&d,y=10;y<a.length;y++){var m=a.words[y]|0;a.words[y-10]=(m&d)<<4|p>>>22,p=m}p>>>=22,a.words[y-10]=p,p===0&&a.length>10?a.length-=10:a.length-=9},q.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var u=0,d=0;d<a.length;d++){var w=a.words[d]|0;u+=w*977,a.words[d]=u&67108863,u=w*64+(u/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function U(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(U,A);function G(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(G,A);function J(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(J,A),J.prototype.imulK=function(a){for(var u=0,d=0;d<a.length;d++){var w=(a.words[d]|0)*19+u,y=w&67108863;w>>>=26,a.words[d]=y,u=w}return u!==0&&(a.words[a.length++]=u),a},s._prime=function(a){if(N[a])return N[a];var u;if(a==="k256")u=new q;else if(a==="p224")u=new U;else if(a==="p192")u=new G;else if(a==="p25519")u=new J;else throw new Error("Unknown prime "+a);return N[a]=u,u};function j(v){if(typeof v=="string"){var a=s._prime(v);this.m=a.p,this.prime=a}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}j.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},j.prototype._verify2=function(a,u){r((a.negative|u.negative)===0,"red works only with positives"),r(a.red&&a.red===u.red,"red works only with red numbers")},j.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(x(a,a.umod(this.m)._forceRed(this)),a)},j.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},j.prototype.add=function(a,u){this._verify2(a,u);var d=a.add(u);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},j.prototype.iadd=function(a,u){this._verify2(a,u);var d=a.iadd(u);return d.cmp(this.m)>=0&&d.isub(this.m),d},j.prototype.sub=function(a,u){this._verify2(a,u);var d=a.sub(u);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},j.prototype.isub=function(a,u){this._verify2(a,u);var d=a.isub(u);return d.cmpn(0)<0&&d.iadd(this.m),d},j.prototype.shl=function(a,u){return this._verify1(a),this.imod(a.ushln(u))},j.prototype.imul=function(a,u){return this._verify2(a,u),this.imod(a.imul(u))},j.prototype.mul=function(a,u){return this._verify2(a,u),this.imod(a.mul(u))},j.prototype.isqr=function(a){return this.imul(a,a.clone())},j.prototype.sqr=function(a){return this.mul(a,a)},j.prototype.sqrt=function(a){if(a.isZero())return a.clone();var u=this.m.andln(3);if(r(u%2===1),u===3){var d=this.m.add(new s(1)).iushrn(2);return this.pow(a,d)}for(var w=this.m.subn(1),y=0;!w.isZero()&&w.andln(1)===0;)y++,w.iushrn(1);r(!w.isZero());var p=new s(1).toRed(this),m=p.redNeg(),h=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new s(2*c*c).toRed(this);this.pow(c,h).cmp(m)!==0;)c.redIAdd(m);for(var g=this.pow(c,w),C=this.pow(a,w.addn(1).iushrn(1)),D=this.pow(a,w),z=y;D.cmp(p)!==0;){for(var V=D,Q=0;V.cmp(p)!==0;Q++)V=V.redSqr();r(Q<z);var X=this.pow(g,new s(1).iushln(z-Q-1));C=C.redMul(X),g=X.redSqr(),D=D.redMul(g),z=Q}return C},j.prototype.invm=function(a){var u=a._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},j.prototype.pow=function(a,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return a.clone();var d=4,w=new Array(1<<d);w[0]=new s(1).toRed(this),w[1]=a;for(var y=2;y<w.length;y++)w[y]=this.mul(w[y-1],a);var p=w[0],m=0,h=0,c=u.bitLength()%26;for(c===0&&(c=26),y=u.length-1;y>=0;y--){for(var g=u.words[y],C=c-1;C>=0;C--){var D=g>>C&1;if(p!==w[0]&&(p=this.sqr(p)),D===0&&m===0){h=0;continue}m<<=1,m|=D,h++,!(h!==d&&(y!==0||C!==0))&&(p=this.mul(p,w[m]),h=0,m=0)}c=26}return p},j.prototype.convertTo=function(a){var u=a.umod(this.m);return u===a?u.clone():u},j.prototype.convertFrom=function(a){var u=a.clone();return u.red=null,u},s.mont=function(a){return new ct(a)};function ct(v){j.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ct,j),ct.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},ct.prototype.convertFrom=function(a){var u=this.imod(a.mul(this.rinv));return u.red=null,u},ct.prototype.imul=function(a,u){if(a.isZero()||u.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(u),w=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=d.isub(w).iushrn(this.shift),p=y;return y.cmp(this.m)>=0?p=y.isub(this.m):y.cmpn(0)<0&&(p=y.iadd(this.m)),p._forceRed(this)},ct.prototype.mul=function(a,u){if(a.isZero()||u.isZero())return new s(0)._forceRed(this);var d=a.mul(u),w=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),y=d.isub(w).iushrn(this.shift),p=y;return y.cmp(this.m)>=0?p=y.isub(this.m):y.cmpn(0)<0&&(p=y.iadd(this.m)),p._forceRed(this)},ct.prototype.invm=function(a){var u=this.imod(a._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(n,Ae)})(Va);var Wr={},Za={get exports(){return Wr},set exports(n){Wr=n}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=nt,r=e.Buffer;function i(o,f){for(var l in o)f[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(i(e,t),t.Buffer=s);function s(o,f,l){return r(o,f,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,f,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,f,l)},s.alloc=function(o,f,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var b=r(o);return f!==void 0?typeof l=="string"?b.fill(f,l):b.fill(f):b.fill(0),b},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Za,Wr);function gi(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function ro(n,...t){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function Ya(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gi(n.outputLen),gi(n.blockLen)}function Gr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Ja(n,t){ro(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Vn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const no=n=>n instanceof Uint8Array,Zn=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Me=(n,t)=>n<<32-t|n>>>t,Xa=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Xa)throw new Error("Non little-endian hardware is not supported");function so(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Ls(n){if(typeof n=="string"&&(n=so(n)),!no(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function io(...n){const t=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let e=0;return n.forEach(r=>{if(!no(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}class oo{clone(){return this._cloneInto()}}function ao(n){const t=r=>n().update(Ls(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function co(n=32){if(Vn&&typeof Vn.getRandomValues=="function")return Vn.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function Qa(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(e>>i&s),f=Number(e&s),l=r?4:0,b=r?0:4;n.setUint32(t+l,o,r),n.setUint32(t+b,f,r)}class uo extends oo{constructor(t,e,r,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Zn(this.buffer)}update(t){Gr(this);const{view:e,buffer:r,blockLen:i}=this;t=Ls(t);const s=t.length;for(let o=0;o<s;){const f=Math.min(i-this.pos,s-o);if(f===i){const l=Zn(t);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(t.subarray(o,o+f),this.pos),this.pos+=f,o+=f,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gr(this),Ja(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let S=o;S<i;S++)e[S]=0;Qa(r,i-8,BigInt(this.length*8),s),this.process(r,0);const f=Zn(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=l/4,x=this.get();if(b>x.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<b;S++)f.setUint32(4*S,x[S],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:i,finished:s,destroyed:o,pos:f}=this;return t.length=i,t.pos=f,t.finished=s,t.destroyed=o,i%e&&t.buffer.set(r),t}}const zr=BigInt(2**32-1),ss=BigInt(32);function fo(n,t=!1){return t?{h:Number(n&zr),l:Number(n>>ss&zr)}:{h:Number(n>>ss&zr)|0,l:Number(n&zr)|0}}function tc(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=fo(n[i],t);[e[i],r[i]]=[s,o]}return[e,r]}const ec=(n,t)=>BigInt(n>>>0)<<ss|BigInt(t>>>0),rc=(n,t,e)=>n>>>e,nc=(n,t,e)=>n<<32-e|t>>>e,sc=(n,t,e)=>n>>>e|t<<32-e,ic=(n,t,e)=>n<<32-e|t>>>e,oc=(n,t,e)=>n<<64-e|t>>>e-32,ac=(n,t,e)=>n>>>e-32|t<<64-e,cc=(n,t)=>t,uc=(n,t)=>n,fc=(n,t,e)=>n<<e|t>>>32-e,lc=(n,t,e)=>t<<e|n>>>32-e,hc=(n,t,e)=>t<<e-32|n>>>64-e,dc=(n,t,e)=>n<<e-32|t>>>64-e;function pc(n,t,e,r){const i=(t>>>0)+(r>>>0);return{h:n+e+(i/2**32|0)|0,l:i|0}}const gc=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),mc=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,yc=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),wc=(n,t,e,r,i)=>t+e+r+i+(n/2**32|0)|0,bc=(n,t,e,r,i)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),vc=(n,t,e,r,i,s)=>t+e+r+i+s+(n/2**32|0)|0,xc={fromBig:fo,split:tc,toBig:ec,shrSH:rc,shrSL:nc,rotrSH:sc,rotrSL:ic,rotrBH:oc,rotrBL:ac,rotr32H:cc,rotr32L:uc,rotlSH:fc,rotlSL:lc,rotlBH:hc,rotlBL:dc,add:pc,add3L:gc,add3H:mc,add4L:yc,add4H:wc,add5H:vc,add5L:bc},it=xc,[_c,Sc]=(()=>it.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),De=new Uint32Array(80),ze=new Uint32Array(80);class Ec extends uo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:i,Ch:s,Cl:o,Dh:f,Dl:l,Eh:b,El:x,Fh:S,Fl:T,Gh:M,Gl:k,Hh:_,Hl:E}=this;return[t,e,r,i,s,o,f,l,b,x,S,T,M,k,_,E]}set(t,e,r,i,s,o,f,l,b,x,S,T,M,k,_,E){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=f|0,this.Dl=l|0,this.Eh=b|0,this.El=x|0,this.Fh=S|0,this.Fl=T|0,this.Gh=M|0,this.Gl=k|0,this.Hh=_|0,this.Hl=E|0}process(t,e){for(let R=0;R<16;R++,e+=4)De[R]=t.getUint32(e),ze[R]=t.getUint32(e+=4);for(let R=16;R<80;R++){const O=De[R-15]|0,N=ze[R-15]|0,A=it.rotrSH(O,N,1)^it.rotrSH(O,N,8)^it.shrSH(O,N,7),q=it.rotrSL(O,N,1)^it.rotrSL(O,N,8)^it.shrSL(O,N,7),U=De[R-2]|0,G=ze[R-2]|0,J=it.rotrSH(U,G,19)^it.rotrBH(U,G,61)^it.shrSH(U,G,6),j=it.rotrSL(U,G,19)^it.rotrBL(U,G,61)^it.shrSL(U,G,6),ct=it.add4L(q,j,ze[R-7],ze[R-16]),v=it.add4H(ct,A,J,De[R-7],De[R-16]);De[R]=v|0,ze[R]=ct|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:f,Cl:l,Dh:b,Dl:x,Eh:S,El:T,Fh:M,Fl:k,Gh:_,Gl:E,Hh:L,Hl:P}=this;for(let R=0;R<80;R++){const O=it.rotrSH(S,T,14)^it.rotrSH(S,T,18)^it.rotrBH(S,T,41),N=it.rotrSL(S,T,14)^it.rotrSL(S,T,18)^it.rotrBL(S,T,41),A=S&M^~S&_,q=T&k^~T&E,U=it.add5L(P,N,q,Sc[R],ze[R]),G=it.add5H(U,L,O,A,_c[R],De[R]),J=U|0,j=it.rotrSH(r,i,28)^it.rotrBH(r,i,34)^it.rotrBH(r,i,39),ct=it.rotrSL(r,i,28)^it.rotrBL(r,i,34)^it.rotrBL(r,i,39),v=r&s^r&f^s&f,a=i&o^i&l^o&l;L=_|0,P=E|0,_=M|0,E=k|0,M=S|0,k=T|0,{h:S,l:T}=it.add(b|0,x|0,G|0,J|0),b=f|0,x=l|0,f=s|0,l=o|0,s=r|0,o=i|0;const u=it.add3L(J,ct,a);r=it.add3H(u,G,j,v),i=u|0}({h:r,l:i}=it.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=it.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:f,l}=it.add(this.Ch|0,this.Cl|0,f|0,l|0),{h:b,l:x}=it.add(this.Dh|0,this.Dl|0,b|0,x|0),{h:S,l:T}=it.add(this.Eh|0,this.El|0,S|0,T|0),{h:M,l:k}=it.add(this.Fh|0,this.Fl|0,M|0,k|0),{h:_,l:E}=it.add(this.Gh|0,this.Gl|0,_|0,E|0),{h:L,l:P}=it.add(this.Hh|0,this.Hl|0,L|0,P|0),this.set(r,i,s,o,f,l,b,x,S,T,M,k,_,E,L,P)}roundClean(){De.fill(0),ze.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const lo=ao(()=>new Ec);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ho=BigInt(0),mn=BigInt(1),kc=BigInt(2),yn=n=>n instanceof Uint8Array,Bc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function er(n){if(!yn(n))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=Bc[n[e]];return t}function po(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function Ts(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function pr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let r=0;r<e.length;r++){const i=r*2,s=n.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function Qe(n){return Ts(er(n))}function hr(n){if(!yn(n))throw new Error("Uint8Array expected");return Ts(er(Uint8Array.from(n).reverse()))}function gr(n,t){return pr(n.toString(16).padStart(t*2,"0"))}function Rr(n,t){return gr(n,t).reverse()}function Ac(n){return pr(po(n))}function ie(n,t,e){let r;if(typeof t=="string")try{r=pr(t)}catch(s){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${s}`)}else if(yn(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof e=="number"&&i!==e)throw new Error(`${n} expected ${e} bytes, got ${i}`);return r}function rr(...n){const t=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let e=0;return n.forEach(r=>{if(!yn(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}function Ic(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function Mc(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Rc(n){let t;for(t=0;n>ho;n>>=mn,t+=1);return t}function Lc(n,t){return n>>BigInt(t)&mn}const Tc=(n,t,e)=>n|(e?mn:ho)<<BigInt(t),Cs=n=>(kc<<BigInt(n-1))-mn,Yn=n=>new Uint8Array(n),mi=n=>Uint8Array.from(n);function go(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Yn(n),i=Yn(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},f=(...S)=>e(i,r,...S),l=(S=Yn())=>{i=f(mi([0]),S),r=f(),S.length!==0&&(i=f(mi([1]),S),r=f())},b=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const T=[];for(;S<t;){r=f();const M=r.slice();T.push(M),S+=r.length}return rr(...T)};return(S,T)=>{o(),l(S);let M;for(;!(M=T(b()));)l();return o(),M}}const Cc={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function br(n,t,e={}){const r=(i,s,o)=>{const f=Cc[s];if(typeof f!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=n[i];if(!(o&&l===void 0)&&!f(l,n))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(e))r(i,s,!0);return n}const Oc=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Lc,bitLen:Rc,bitMask:Cs,bitSet:Tc,bytesToHex:er,bytesToNumberBE:Qe,bytesToNumberLE:hr,concatBytes:rr,createHmacDrbg:go,ensureBytes:ie,equalBytes:Ic,hexToBytes:pr,hexToNumber:Ts,numberToBytesBE:gr,numberToBytesLE:Rr,numberToHexUnpadded:po,numberToVarBytesBE:Ac,utf8ToBytes:Mc,validateObject:br},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oe=BigInt(0),kt=BigInt(1),Ze=BigInt(2),Pc=BigInt(3),is=BigInt(4),yi=BigInt(5),wi=BigInt(8);BigInt(9);BigInt(16);function wt(n,t){const e=n%t;return e>=oe?e:t+e}function Nc(n,t,e){if(e<=oe||t<oe)throw new Error("Expected power/modulo > 0");if(e===kt)return oe;let r=kt;for(;t>oe;)t&kt&&(r=r*n%e),n=n*n%e,t>>=kt;return r}function Tt(n,t,e){let r=n;for(;t-- >oe;)r*=r,r%=e;return r}function os(n,t){if(n===oe||t<=oe)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=wt(n,t),r=t,i=oe,s=kt;for(;e!==oe;){const f=r/e,l=r%e,b=i-s*f;r=e,e=l,i=s,s=b}if(r!==kt)throw new Error("invert: does not exist");return wt(i,t)}function Uc(n){const t=(n-kt)/Ze;let e,r,i;for(e=n-kt,r=0;e%Ze===oe;e/=Ze,r++);for(i=Ze;i<n&&Nc(i,t,n)!==n-kt;i++);if(r===1){const o=(n+kt)/is;return function(l,b){const x=l.pow(b,o);if(!l.eql(l.sqr(x),b))throw new Error("Cannot find square root");return x}}const s=(e+kt)/Ze;return function(f,l){if(f.pow(l,t)===f.neg(f.ONE))throw new Error("Cannot find square root");let b=r,x=f.pow(f.mul(f.ONE,i),e),S=f.pow(l,s),T=f.pow(l,e);for(;!f.eql(T,f.ONE);){if(f.eql(T,f.ZERO))return f.ZERO;let M=1;for(let _=f.sqr(T);M<b&&!f.eql(_,f.ONE);M++)_=f.sqr(_);const k=f.pow(x,kt<<BigInt(b-M-1));x=f.sqr(k),S=f.mul(S,k),T=f.mul(T,x),b=M}return S}}function qc(n){if(n%is===Pc){const t=(n+kt)/is;return function(r,i){const s=r.pow(i,t);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%wi===yi){const t=(n-yi)/wi;return function(r,i){const s=r.mul(i,Ze),o=r.pow(s,t),f=r.mul(i,o),l=r.mul(r.mul(f,Ze),o),b=r.mul(f,r.sub(l,r.ONE));if(!r.eql(r.sqr(b),i))throw new Error("Cannot find square root");return b}}return Uc(n)}const Fc=(n,t)=>(wt(n,t)&kt)===kt,Dc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zc(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Dc.reduce((r,i)=>(r[i]="function",r),t);return br(n,e)}function Kc(n,t,e){if(e<oe)throw new Error("Expected power > 0");if(e===oe)return n.ONE;if(e===kt)return t;let r=n.ONE,i=t;for(;e>oe;)e&kt&&(r=n.mul(r,i)),i=n.sqr(i),e>>=kt;return r}function Hc(n,t){const e=new Array(t.length),r=t.reduce((s,o,f)=>n.is0(o)?s:(e[f]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return t.reduceRight((s,o,f)=>n.is0(o)?s:(e[f]=n.mul(s,e[f]),n.mul(s,o)),i),e}function mo(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function yo(n,t,e=!1,r={}){if(n<=oe)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=mo(n,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=qc(n),f=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:Cs(i),ZERO:oe,ONE:kt,create:l=>wt(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return oe<=l&&l<n},is0:l=>l===oe,isOdd:l=>(l&kt)===kt,neg:l=>wt(-l,n),eql:(l,b)=>l===b,sqr:l=>wt(l*l,n),add:(l,b)=>wt(l+b,n),sub:(l,b)=>wt(l-b,n),mul:(l,b)=>wt(l*b,n),pow:(l,b)=>Kc(f,l,b),div:(l,b)=>wt(l*os(b,n),n),sqrN:l=>l*l,addN:(l,b)=>l+b,subN:(l,b)=>l-b,mulN:(l,b)=>l*b,inv:l=>os(l,n),sqrt:r.sqrt||(l=>o(f,l)),invertBatch:l=>Hc(f,l),cmov:(l,b,x)=>x?b:l,toBytes:l=>e?Rr(l,s):gr(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return e?hr(l):Qe(l)}});return Object.freeze(f)}function $c(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const e=n.sqrt(t);return n.isOdd(e)?n.neg(e):e}function wo(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function bo(n){const t=wo(n);return t+Math.ceil(t/2)}function jc(n,t,e=!1){const r=n.length,i=wo(t),s=bo(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=e?Qe(n):hr(n),f=wt(o,t-kt)+kt;return e?Rr(f,i):gr(f,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wc=BigInt(0),Jn=BigInt(1);function vo(n,t){const e=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(t/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:e,unsafeLadder(i,s){let o=n.ZERO,f=i;for(;s>Wc;)s&Jn&&(o=o.add(f)),f=f.double(),s>>=Jn;return o},precomputeWindow(i,s){const{windows:o,windowSize:f}=r(s),l=[];let b=i,x=b;for(let S=0;S<o;S++){x=b,l.push(x);for(let T=1;T<f;T++)x=x.add(b),l.push(x);b=x.double()}return l},wNAF(i,s,o){const{windows:f,windowSize:l}=r(i);let b=n.ZERO,x=n.BASE;const S=BigInt(2**i-1),T=2**i,M=BigInt(i);for(let k=0;k<f;k++){const _=k*l;let E=Number(o&S);o>>=M,E>l&&(E-=T,o+=Jn);const L=_,P=_+Math.abs(E)-1,R=k%2!==0,O=E<0;E===0?x=x.add(e(R,s[L])):b=b.add(e(O,s[P]))}return{p:b,f:x}},wNAFCached(i,s,o,f){const l=i._WINDOW_SIZE||1;let b=s.get(i);return b||(b=this.precomputeWindow(i,l),l!==1&&s.set(i,f(b))),this.wNAF(l,b,o)}}}function Os(n){return zc(n.Fp),br(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...mo(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ke=BigInt(0),ye=BigInt(1),Kr=BigInt(2),Gc=BigInt(8),Vc={zip215:!0};function Zc(n){const t=Os(n);return br(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Ps(n){const t=Zc(n),{Fp:e,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:f,h:l}=t,b=Kr<<BigInt(f*8)-ye,x=e.create,S=t.uvRatio||((y,p)=>{try{return{isValid:!0,value:e.sqrt(y*e.inv(p))}}catch{return{isValid:!1,value:ke}}}),T=t.adjustScalarBytes||(y=>y),M=t.domain||((y,p,m)=>{if(p.length||m)throw new Error("Contexts/pre-hash are not supported");return y}),k=y=>typeof y=="bigint"&&ke<y,_=(y,p)=>k(y)&&k(p)&&y<p,E=y=>y===ke||_(y,b);function L(y,p){if(_(y,p))return y;throw new Error(`Expected valid scalar < ${p}, got ${typeof y} ${y}`)}function P(y){return y===ke?y:L(y,r)}const R=new Map;function O(y){if(!(y instanceof N))throw new Error("ExtendedPoint expected")}class N{constructor(p,m,h,c){if(this.ex=p,this.ey=m,this.ez=h,this.et=c,!E(p))throw new Error("x required");if(!E(m))throw new Error("y required");if(!E(h))throw new Error("z required");if(!E(c))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof N)throw new Error("extended point not allowed");const{x:m,y:h}=p||{};if(!E(m)||!E(h))throw new Error("invalid affine point");return new N(m,h,ye,x(m*h))}static normalizeZ(p){const m=e.invertBatch(p.map(h=>h.ez));return p.map((h,c)=>h.toAffine(m[c])).map(N.fromAffine)}_setWindowSize(p){this._WINDOW_SIZE=p,R.delete(this)}assertValidity(){const{a:p,d:m}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:h,ey:c,ez:g,et:C}=this,D=x(h*h),z=x(c*c),V=x(g*g),Q=x(V*V),X=x(D*p),pt=x(V*x(X+z)),at=x(Q+x(m*x(D*z)));if(pt!==at)throw new Error("bad point: equation left != right (1)");const st=x(h*c),se=x(g*C);if(st!==se)throw new Error("bad point: equation left != right (2)")}equals(p){O(p);const{ex:m,ey:h,ez:c}=this,{ex:g,ey:C,ez:D}=p,z=x(m*D),V=x(g*c),Q=x(h*D),X=x(C*c);return z===V&&Q===X}is0(){return this.equals(N.ZERO)}negate(){return new N(x(-this.ex),this.ey,this.ez,x(-this.et))}double(){const{a:p}=t,{ex:m,ey:h,ez:c}=this,g=x(m*m),C=x(h*h),D=x(Kr*x(c*c)),z=x(p*g),V=m+h,Q=x(x(V*V)-g-C),X=z+C,pt=X-D,at=z-C,st=x(Q*pt),se=x(X*at),ht=x(Q*at),gt=x(pt*X);return new N(st,se,gt,ht)}add(p){O(p);const{a:m,d:h}=t,{ex:c,ey:g,ez:C,et:D}=this,{ex:z,ey:V,ez:Q,et:X}=p;if(m===BigInt(-1)){const Sr=x((g-c)*(V+z)),vt=x((g+c)*(V-z)),mt=x(vt-Sr);if(mt===ke)return this.double();const Er=x(C*Kr*X),xt=x(D*Kr*Q),_t=xt+Er,kr=vt+Sr,St=xt-Er,Mt=x(_t*mt),Dr=x(kr*St),Rt=x(_t*St),Lt=x(mt*kr);return new N(Mt,Dr,Lt,Rt)}const pt=x(c*z),at=x(g*V),st=x(D*h*X),se=x(C*Q),ht=x((c+g)*(z+V)-pt-at),gt=se-st,Fe=se+st,bt=x(at-m*pt),Bt=x(ht*gt),Fr=x(Fe*bt),At=x(ht*bt),It=x(gt*Fe);return new N(Bt,Fr,It,At)}subtract(p){return this.add(p.negate())}wNAF(p){return U.wNAFCached(this,R,p,N.normalizeZ)}multiply(p){const{p:m,f:h}=this.wNAF(L(p,r));return N.normalizeZ([m,h])[0]}multiplyUnsafe(p){let m=P(p);return m===ke?q:this.equals(q)||m===ye?this:this.equals(A)?this.wNAF(m).p:U.unsafeLadder(this,m)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return U.unsafeLadder(this,r).is0()}toAffine(p){const{ex:m,ey:h,ez:c}=this,g=this.is0();p==null&&(p=g?Gc:e.inv(c));const C=x(m*p),D=x(h*p),z=x(c*p);if(g)return{x:ke,y:ye};if(z!==ye)throw new Error("invZ was invalid");return{x:C,y:D}}clearCofactor(){const{h:p}=t;return p===ye?this:this.multiplyUnsafe(p)}static fromHex(p,m=!1){const{d:h,a:c}=t,g=e.BYTES;p=ie("pointHex",p,g);const C=p.slice(),D=p[g-1];C[g-1]=D&-129;const z=hr(C);z===ke||(m?L(z,b):L(z,e.ORDER));const V=x(z*z),Q=x(V-ye),X=x(h*V-c);let{isValid:pt,value:at}=S(Q,X);if(!pt)throw new Error("Point.fromHex: invalid y coordinate");const st=(at&ye)===ye,se=(D&128)!==0;if(!m&&at===ke&&se)throw new Error("Point.fromHex: x=0 and x_0=1");return se!==st&&(at=x(-at)),N.fromAffine({x:at,y:z})}static fromPrivateKey(p){return j(p).point}toRawBytes(){const{x:p,y:m}=this.toAffine(),h=Rr(m,e.BYTES);return h[h.length-1]|=p&ye?128:0,h}toHex(){return er(this.toRawBytes())}}N.BASE=new N(t.Gx,t.Gy,ye,x(t.Gx*t.Gy)),N.ZERO=new N(ke,ye,ye,ke);const{BASE:A,ZERO:q}=N,U=vo(N,f*8);function G(y){return wt(y,r)}function J(y){return G(hr(y))}function j(y){const p=f;y=ie("private key",y,p);const m=ie("hashed private key",s(y),2*p),h=T(m.slice(0,p)),c=m.slice(p,2*p),g=J(h),C=A.multiply(g),D=C.toRawBytes();return{head:h,prefix:c,scalar:g,point:C,pointBytes:D}}function ct(y){return j(y).pointBytes}function v(y=new Uint8Array,...p){const m=rr(...p);return J(s(M(m,ie("context",y),!!i)))}function a(y,p,m={}){y=ie("message",y),i&&(y=i(y));const{prefix:h,scalar:c,pointBytes:g}=j(p),C=v(m.context,h,y),D=A.multiply(C).toRawBytes(),z=v(m.context,D,g,y),V=G(C+z*c);P(V);const Q=rr(D,Rr(V,e.BYTES));return ie("result",Q,f*2)}const u=Vc;function d(y,p,m,h=u){const{context:c,zip215:g}=h,C=e.BYTES;y=ie("signature",y,2*C),p=ie("message",p),i&&(p=i(p));const D=hr(y.slice(C,2*C));let z,V,Q;try{z=N.fromHex(m,g),V=N.fromHex(y.slice(0,C),g),Q=A.multiplyUnsafe(D)}catch{return!1}if(!g&&z.isSmallOrder())return!1;const X=v(c,V.toRawBytes(),z.toRawBytes(),p);return V.add(z.multiplyUnsafe(X)).subtract(Q).clearCofactor().equals(N.ZERO)}return A._setWindowSize(8),{CURVE:t,getPublicKey:ct,sign:a,verify:d,ExtendedPoint:N,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>o(e.BYTES),precompute(y=8,p=N.BASE){return p._setWindowSize(y),p.multiply(BigInt(3)),p}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ns=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),bi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Yc=BigInt(1),as=BigInt(2),Jc=BigInt(5),vi=BigInt(10),Xc=BigInt(20),Qc=BigInt(40),xi=BigInt(80);function tu(n){const t=Ns,r=n*n%t*n%t,i=Tt(r,as,t)*r%t,s=Tt(i,Yc,t)*n%t,o=Tt(s,Jc,t)*s%t,f=Tt(o,vi,t)*o%t,l=Tt(f,Xc,t)*f%t,b=Tt(l,Qc,t)*l%t,x=Tt(b,xi,t)*b%t,S=Tt(x,xi,t)*b%t,T=Tt(S,vi,t)*o%t;return{pow_p_5_8:Tt(T,as,t)*n%t,b2:r}}function eu(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function ru(n,t){const e=Ns,r=wt(t*t*t,e),i=wt(r*r*t,e),s=tu(n*i).pow_p_5_8;let o=wt(n*r*s,e);const f=wt(t*o*o,e),l=o,b=wt(o*bi,e),x=f===n,S=f===wt(-n,e),T=f===wt(-n*bi,e);return x&&(o=l),(S||T)&&(o=b),Fc(o,e)&&(o=wt(-o,e)),{isValid:x||S,value:o}}const qe=yo(Ns,void 0,!0),Us={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:lo,randomBytes:co,adjustScalarBytes:eu,uvRatio:ru},wn=Ps(Us);function xo(n,t,e){if(t.length>255)throw new Error("Context is too big");return io(so("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,n)}({...Us});({...Us});const nu=(qe.ORDER+BigInt(3))/BigInt(8);qe.pow(as,nu);qe.sqrt(qe.neg(qe.ONE));(qe.ORDER-BigInt(5))/BigInt(8);BigInt(486662);$c(qe,qe.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Hr=Wr.Buffer;function su(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=r}var o=n.length,f=n.charAt(0),l=Math.log(o)/Math.log(256),b=Math.log(256)/Math.log(o);function x(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=Hr.from(M)),!Hr.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var k=0,_=0,E=0,L=M.length;E!==L&&M[E]===0;)E++,k++;for(var P=(L-E)*b+1>>>0,R=new Uint8Array(P);E!==L;){for(var O=M[E],N=0,A=P-1;(O!==0||N<_)&&A!==-1;A--,N++)O+=256*R[A]>>>0,R[A]=O%o>>>0,O=O/o>>>0;if(O!==0)throw new Error("Non-zero carry");_=N,E++}for(var q=P-_;q!==P&&R[q]===0;)q++;for(var U=f.repeat(k);q<P;++q)U+=n.charAt(R[q]);return U}function S(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return Hr.alloc(0);for(var k=0,_=0,E=0;M[k]===f;)_++,k++;for(var L=(M.length-k)*l+1>>>0,P=new Uint8Array(L);M[k];){var R=t[M.charCodeAt(k)];if(R===255)return;for(var O=0,N=L-1;(R!==0||O<E)&&N!==-1;N--,O++)R+=o*P[N]>>>0,P[N]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");E=O,k++}for(var A=L-E;A!==L&&P[A]===0;)A++;var q=Hr.allocUnsafe(_+(L-A));q.fill(0,0,_);for(var U=_;A!==L;)q[U++]=P[A++];return q}function T(M){var k=S(M);if(k)return k;throw new Error("Non-base"+o+" character")}return{encode:x,decodeUnsafe:S,decode:T}}var iu=su,ou=iu,au="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Pt=ou(au);const cu=(n,t,e)=>n&t^~n&e,uu=(n,t,e)=>n&t^n&e^t&e,fu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ke=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),He=new Uint32Array(64);class lu extends uo{constructor(){super(64,32,8,!1),this.A=Ke[0]|0,this.B=Ke[1]|0,this.C=Ke[2]|0,this.D=Ke[3]|0,this.E=Ke[4]|0,this.F=Ke[5]|0,this.G=Ke[6]|0,this.H=Ke[7]|0}get(){const{A:t,B:e,C:r,D:i,E:s,F:o,G:f,H:l}=this;return[t,e,r,i,s,o,f,l]}set(t,e,r,i,s,o,f,l){this.A=t|0,this.B=e|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=f|0,this.H=l|0}process(t,e){for(let S=0;S<16;S++,e+=4)He[S]=t.getUint32(e,!1);for(let S=16;S<64;S++){const T=He[S-15],M=He[S-2],k=Me(T,7)^Me(T,18)^T>>>3,_=Me(M,17)^Me(M,19)^M>>>10;He[S]=_+He[S-7]+k+He[S-16]|0}let{A:r,B:i,C:s,D:o,E:f,F:l,G:b,H:x}=this;for(let S=0;S<64;S++){const T=Me(f,6)^Me(f,11)^Me(f,25),M=x+T+cu(f,l,b)+fu[S]+He[S]|0,_=(Me(r,2)^Me(r,13)^Me(r,22))+uu(r,i,s)|0;x=b,b=l,l=f,f=o+M|0,o=s,s=i,i=r,r=M+_|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,f=f+this.E|0,l=l+this.F|0,b=b+this.G|0,x=x+this.H|0,this.set(r,i,s,o,f,l,b,x)}roundClean(){He.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const cs=ao(()=>new lu);var ce={};function Ne(n,t,e){return t<=n&&n<=e}function bn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function hu(n){for(var t=String(n),e=t.length,r=0,i=[];r<e;){var s=t.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===e-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var f=s&1023,l=o&1023;i.push(65536+(f<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function du(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Vr=-1;function qs(n){this.tokens=[].slice.call(n)}qs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Vr},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var mr=-1;function Xn(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Zr="utf-8";function Yr(n,t){if(!(this instanceof Yr))return new Yr(n,t);if(n=n!==void 0?String(n).toLowerCase():Zr,n!==Zr)throw new Error("Encoding not supported. Only utf-8 is supported");t=bn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Yr.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=bn(e),this._streaming||(this._decoder=new pu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var i=new qs(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==mr);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===mr)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),du(s)}};function Jr(n,t){if(!(this instanceof Jr))return new Jr(n,t);if(n=n!==void 0?String(n).toLowerCase():Zr,n!==Zr)throw new Error("Encoding not supported. Only utf-8 is supported");t=bn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Jr.prototype={encode:function(t,e){t=t?String(t):"",e=bn(e),this._streaming||(this._encoder=new gu(this._options)),this._streaming=!!e.stream;for(var r=[],i=new qs(hu(t)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==mr);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==mr;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function pu(n){var t=n.fatal,e=0,r=0,i=0,s=128,o=191;this.handler=function(f,l){if(l===Vr&&i!==0)return i=0,Xn(t);if(l===Vr)return mr;if(i===0){if(Ne(l,0,127))return l;if(Ne(l,194,223))i=1,e=l-192;else if(Ne(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,e=l-224;else if(Ne(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,e=l-240;else return Xn(t);return e=e<<6*i,null}if(!Ne(l,s,o))return e=i=r=0,s=128,o=191,f.prepend(l),Xn(t);if(s=128,o=191,r+=1,e+=l-128<<6*(i-r),r!==i)return null;var b=e;return e=i=r=0,b}}function gu(n){n.fatal,this.handler=function(t,e){if(e===Vr)return mr;if(Ne(e,0,127))return e;var r,i;Ne(e,128,2047)?(r=1,i=192):Ne(e,2048,65535)?(r=2,i=224):Ne(e,65536,1114111)&&(r=3,i=240);for(var s=[(e>>6*r)+i];r>0;){var o=e>>6*(r-1);s.push(128|o&63),r-=1}return s}}const mu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Yr,TextEncoder:Jr},Symbol.toStringTag,{value:"Module"})),yu=Yi(mu);var wu=Ae&&Ae.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),bu=Ae&&Ae.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Ce=Ae&&Ae.__decorate||function(n,t,e,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,t,e,r);else for(var f=n.length-1;f>=0;f--)(o=n[f])&&(s=(i<3?o(s):i>3?o(t,e,s):o(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s},vu=Ae&&Ae.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&wu(t,n,e);return bu(t,n),t},_o=Ae&&Ae.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ce,"__esModule",{value:!0});var So=ce.deserializeUnchecked=Mo=ce.deserialize=Io=ce.serialize=ce.BinaryReader=ce.BinaryWriter=ce.BorshError=ce.baseDecode=ce.baseEncode=void 0;const We=_o(Mr),Eo=_o(Pt),xu=vu(yu),_u=typeof TextDecoder!="function"?xu.TextDecoder:TextDecoder,Su=new _u("utf-8",{fatal:!0});function Eu(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),Eo.default.encode(Buffer.from(n))}ce.baseEncode=Eu;function ku(n){return Buffer.from(Eo.default.decode(n))}ce.baseDecode=ku;const Qn=1024;class de extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ce.BorshError=de;class ko{constructor(){this.buf=Buffer.alloc(Qn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Qn)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new We.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Qn)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}ce.BinaryWriter=ko;function Oe(n,t,e){const r=e.value;e.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new de("Reached the end of buffer when deserializing")}throw s}}}class be{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new We.default(t,"le")}readU128(){const t=this.readBuffer(16);return new We.default(t,"le")}readU256(){const t=this.readBuffer(32);return new We.default(t,"le")}readU512(){const t=this.readBuffer(64);return new We.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new de(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Su.decode(e)}catch(r){throw new de(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let i=0;i<e;++i)r.push(t());return r}}Ce([Oe],be.prototype,"readU8",null);Ce([Oe],be.prototype,"readU16",null);Ce([Oe],be.prototype,"readU32",null);Ce([Oe],be.prototype,"readU64",null);Ce([Oe],be.prototype,"readU128",null);Ce([Oe],be.prototype,"readU256",null);Ce([Oe],be.prototype,"readU512",null);Ce([Oe],be.prototype,"readString",null);Ce([Oe],be.prototype,"readFixedArray",null);Ce([Oe],be.prototype,"readArray",null);ce.BinaryReader=be;function Bo(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Ye(n,t,e,r,i){try{if(typeof r=="string")i[`write${Bo(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new de(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);i.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new de(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let s=0;s<r[1];s++)Ye(n,null,e[s],r[0],i)}else i.writeArray(e,s=>{Ye(n,t,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?i.writeU8(0):(i.writeU8(1),Ye(n,t,e,r.type,i));break}case"map":{i.writeU32(e.size),e.forEach((s,o)=>{Ye(n,t,o,r.key,i),Ye(n,t,s,r.value,i)});break}default:throw new de(`FieldType ${r} unrecognized`)}else Ao(n,e,i)}catch(s){throw s instanceof de&&s.addToFieldPath(t),s}}function Ao(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new de(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{Ye(n,i,t[i],s,e)});else if(r.kind==="enum"){const i=t[r.field];for(let s=0;s<r.values.length;++s){const[o,f]=r.values[s];if(o===i){e.writeU8(s),Ye(n,o,t[o],f,e);break}}}else throw new de(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Bu(n,t,e=ko){const r=new e;return Ao(n,t,r),r.toArray()}var Io=ce.serialize=Bu;function Je(n,t,e,r){try{if(typeof e=="string")return r[`read${Bo(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const i=[];for(let s=0;s<e[1];s++)i.push(Je(n,null,e[0],r));return i}else return r.readArray(()=>Je(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?Je(n,t,e.type,r):void 0;if(e.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const f=Je(n,t,e.key,r),l=Je(n,t,e.value,r);i.set(f,l)}return i}return Fs(n,e,r)}catch(i){throw i instanceof de&&i.addToFieldPath(t),i}}function Fs(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new de(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of n.get(t).fields)i[s]=Je(n,s,o,e);return new t(i)}if(r.kind==="enum"){const i=e.readU8();if(i>=r.values.length)throw new de(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],f=Je(n,s,o,e);return new t({[s]:f})}throw new de(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Au(n,t,e,r=be){const i=new r(e),s=Fs(n,t,i);if(i.offset<e.length)throw new de(`Unexpected ${e.length-i.offset} bytes after deserialized data`);return s}var Mo=ce.deserialize=Au;function Iu(n,t,e,r=be){const i=new r(e);return Fs(n,t,i)}So=ce.deserializeUnchecked=Iu;var I={};Object.defineProperty(I,"__esModule",{value:!0});I.s16=I.s8=I.nu64be=I.u48be=I.u40be=I.u32be=I.u24be=I.u16be=ae=I.nu64=I.u48=I.u40=tt=I.u32=I.u24=xe=I.u16=lt=I.u8=tr=I.offset=I.greedy=I.Constant=I.UTF8=I.CString=I.Blob=I.Boolean=I.BitField=I.BitStructure=I.VariantLayout=I.Union=I.UnionLayoutDiscriminator=I.UnionDiscriminator=I.Structure=I.Sequence=I.DoubleBE=I.Double=I.FloatBE=I.Float=I.NearInt64BE=I.NearInt64=I.NearUInt64BE=I.NearUInt64=I.IntBE=I.Int=I.UIntBE=I.UInt=I.OffsetLayout=I.GreedyCount=I.ExternalLayout=I.bindConstructorLayout=I.nameWithProperty=I.Layout=I.uint8ArrayToBuffer=I.checkUint8Array=void 0;I.constant=I.utf8=I.cstr=Ct=I.blob=I.unionLayoutDiscriminator=I.union=pe=I.seq=I.bits=Y=I.struct=I.f64be=I.f64=I.f32be=I.f32=I.ns64be=I.s48be=I.s40be=I.s32be=I.s24be=I.s16be=we=I.ns64=I.s48=I.s40=I.s32=I.s24=void 0;const Ds=nt;function vr(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}I.checkUint8Array=vr;function ft(n){return vr(n),Ds.Buffer.from(n.buffer,n.byteOffset,n.length)}I.uint8ArrayToBuffer=ft;class dt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}I.Layout=dt;function zs(n,t){return t.property?n+"["+t.property+"]":n}I.nameWithProperty=zs;function Mu(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}I.bindConstructorLayout=Mu;class ge extends dt{isCount(){throw new Error("ExternalLayout is abstract")}}I.ExternalLayout=ge;class Ro extends ge{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){vr(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}I.GreedyCount=Ro;class Ks extends ge{constructor(t,e=0,r){if(!(t instanceof dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ee||this.layout instanceof Be}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}I.OffsetLayout=Ks;class Ee extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readUIntLE(e,this.span)}encode(t,e,r=0){return ft(e).writeUIntLE(t,r,this.span),this.span}}I.UInt=Ee;class Be extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readUIntBE(e,this.span)}encode(t,e,r=0){return ft(e).writeUIntBE(t,r,this.span),this.span}}I.UIntBE=Be;class nr extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readIntLE(e,this.span)}encode(t,e,r=0){return ft(e).writeIntLE(t,r,this.span),this.span}}I.Int=nr;class xr extends dt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readIntBE(e,this.span)}encode(t,e,r=0){return ft(e).writeIntBE(t,r,this.span),this.span}}I.IntBE=xr;const us=Math.pow(2,32);function vn(n){const t=Math.floor(n/us),e=n-t*us;return{hi32:t,lo32:e}}function xn(n,t){return n*us+t}class Lo extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ft(t),i=r.readUInt32LE(e),s=r.readUInt32LE(e+4);return xn(s,i)}encode(t,e,r=0){const i=vn(t),s=ft(e);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}I.NearUInt64=Lo;class To extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ft(t),i=r.readUInt32BE(e),s=r.readUInt32BE(e+4);return xn(i,s)}encode(t,e,r=0){const i=vn(t),s=ft(e);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}I.NearUInt64BE=To;class Co extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ft(t),i=r.readUInt32LE(e),s=r.readInt32LE(e+4);return xn(s,i)}encode(t,e,r=0){const i=vn(t),s=ft(e);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}I.NearInt64=Co;class Oo extends dt{constructor(t){super(8,t)}decode(t,e=0){const r=ft(t),i=r.readInt32BE(e),s=r.readUInt32BE(e+4);return xn(i,s)}encode(t,e,r=0){const i=vn(t),s=ft(e);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}I.NearInt64BE=Oo;class Po extends dt{constructor(t){super(4,t)}decode(t,e=0){return ft(t).readFloatLE(e)}encode(t,e,r=0){return ft(e).writeFloatLE(t,r),4}}I.Float=Po;class No extends dt{constructor(t){super(4,t)}decode(t,e=0){return ft(t).readFloatBE(e)}encode(t,e,r=0){return ft(e).writeFloatBE(t,r),4}}I.FloatBE=No;class Uo extends dt{constructor(t){super(8,t)}decode(t,e=0){return ft(t).readDoubleLE(e)}encode(t,e,r=0){return ft(e).writeDoubleLE(t,r),8}}I.Double=Uo;class qo extends dt{constructor(t){super(8,t)}decode(t,e=0){return ft(t).readDoubleBE(e)}encode(t,e,r=0){return ft(e).writeDoubleBE(t,r),8}}I.DoubleBE=qo;class Fo extends dt{constructor(t,e,r){if(!(t instanceof dt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ge&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof ge)&&0<t.span&&(i=e*t.span),super(i,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof ge&&(i=i.decode(t,e)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(t,e+r),++s}return r}decode(t,e=0){const r=[];let i=0,s=this.count;for(s instanceof ge&&(s=s.decode(t,e));i<s;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return r}encode(t,e,r=0){const i=this.elementLayout,s=t.reduce((o,f)=>o+i.encode(f,e,r+o),0);return this.count instanceof ge&&this.count.encode(t.length,e,r),s}}I.Sequence=Fo;class Do extends dt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(t,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){vr(t);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const i=r;let s=0,o=0;for(const f of this.fields){let l=f.span;if(o=0<l?l:0,f.property!==void 0){const b=t[f.property];b!==void 0&&(o=f.encode(b,e,r),0>l&&(l=f.getSpan(e,r)))}s=r,r+=l}return s+o-i}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}I.Structure=Do;class Hs{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}I.UnionDiscriminator=Hs;class Xr extends Hs{constructor(t,e){if(!(t instanceof ge&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}I.UnionLayoutDiscriminator=Xr;class $s extends dt{constructor(t,e,r){let i;if(t instanceof Ee||t instanceof Be)i=new Xr(new Ks(t));else if(t instanceof ge&&t.isCount())i=new Xr(t);else if(t instanceof Hs)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof dt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&(t instanceof Ee||t instanceof Be)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof Ee||t instanceof Be,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(f){return o(f)},this.configGetSourceVariant=function(f){o=f.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const i=this.discriminator,s=i.decode(t,e),o=this.registry[s];if(o===void 0){const f=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[f.property]=f.decode(t,e+l)}else r=o.decode(t,e);return r}encode(t,e,r=0){const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let f=0;return this.usesPrefixDiscriminator&&(f=s.layout.span),s.encode(t[s.property],e,r),f+o.encode(t[o.property],e,r+f)}return i.encode(t,e,r)}addVariant(t,e,r){const i=new zo(this,t,e,r);return this.registry[t]=i,i}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}I.Union=$s;class zo extends dt{constructor(t,e,r,i){if(!(t instanceof $s))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof dt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=r?r.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+r)),r+i}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,r+i),s+=this.layout.getSpan(e,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}I.VariantLayout=zo;function ur(n){return 0>n&&(n+=4294967296),n}class js extends dt{constructor(t,e,r){if(!(t instanceof Ee||t instanceof Be))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(s){return i=ur(s),this},this._packedGetValue=function(){return i}}decode(t,e=0){const r=this.makeDestinationObject(),i=this.word.decode(t,e);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(t));return r}encode(t,e,r=0){const i=this.word.decode(e,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=t[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Ws(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Ko(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}I.BitStructure=js;class Ws{constructor(t,e,r){if(!(t instanceof js))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*t.span,s=t.fields.reduce((o,f)=>o+f.bits,0);if(e+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-e),this.wordMask=ur(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return ur(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==ur(t&this.valueMask))throw new TypeError(zs("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=ur(t<<this.start);this.container._packedSetValue(ur(e&~this.wordMask)|r)}}I.BitField=Ws;let Ko=class extends Ws{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};I.Boolean=Ko;class Ho extends dt{constructor(t,e){if(!(t instanceof ge&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof ge||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),ft(t).slice(e,e+r)}encode(t,e,r){let i=this.length;if(this.length instanceof ge&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(zs("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>e.length)throw new RangeError("encoding overruns Uint8Array");const s=ft(t);return ft(e).write(s.toString("hex"),r,i,"hex"),this.length instanceof ge&&this.length.encode(i,e,r),i}}I.Blob=Ho;class $o extends dt{constructor(t){super(-1,t)}getSpan(t,e=0){vr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return ft(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const i=Ds.Buffer.from(t,"utf8"),s=i.length;if(r+s>e.length)throw new RangeError("encoding overruns Buffer");const o=ft(e);return i.copy(o,r),o[r+s]=0,s+1}}I.CString=$o;class jo extends dt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return vr(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return ft(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const i=Ds.Buffer.from(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(ft(e),r),s}}I.UTF8=jo;class Wo extends dt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}I.Constant=Wo;I.greedy=(n,t)=>new Ro(n,t);var tr=I.offset=(n,t,e)=>new Ks(n,t,e),lt=I.u8=n=>new Ee(1,n),xe=I.u16=n=>new Ee(2,n);I.u24=n=>new Ee(3,n);var tt=I.u32=n=>new Ee(4,n);I.u40=n=>new Ee(5,n);I.u48=n=>new Ee(6,n);var ae=I.nu64=n=>new Lo(n);I.u16be=n=>new Be(2,n);I.u24be=n=>new Be(3,n);I.u32be=n=>new Be(4,n);I.u40be=n=>new Be(5,n);I.u48be=n=>new Be(6,n);I.nu64be=n=>new To(n);I.s8=n=>new nr(1,n);I.s16=n=>new nr(2,n);I.s24=n=>new nr(3,n);I.s32=n=>new nr(4,n);I.s40=n=>new nr(5,n);I.s48=n=>new nr(6,n);var we=I.ns64=n=>new Co(n);I.s16be=n=>new xr(2,n);I.s24be=n=>new xr(3,n);I.s32be=n=>new xr(4,n);I.s40be=n=>new xr(5,n);I.s48be=n=>new xr(6,n);I.ns64be=n=>new Oo(n);I.f32=n=>new Po(n);I.f32be=n=>new No(n);I.f64=n=>new Uo(n);I.f64be=n=>new qo(n);var Y=I.struct=(n,t,e)=>new Do(n,t,e);I.bits=(n,t,e)=>new js(n,t,e);var pe=I.seq=(n,t,e)=>new Fo(n,t,e);I.union=(n,t,e)=>new $s(n,t,e);I.unionLayoutDiscriminator=(n,t)=>new Xr(n,t);var Ct=I.blob=(n,t)=>new Ho(n,t);I.cstr=n=>new $o(n);I.utf8=(n,t)=>new jo(n,t);I.constant=(n,t)=>new Wo(n,t);var Or={};Object.defineProperty(Or,"__esModule",{value:!0});function Ru(n){{const t=Buffer.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Lu=Or.toBigIntLE=Ru;function Tu(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Or.toBigIntBE=Tu;function Cu(n,t){{const e=n.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Ou=Or.toBufferLE=Cu;function Pu(n,t){{const e=n.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Or.toBufferBE=Pu;class Nu extends TypeError{constructor(t,e){let r;const{message:i,...s}=t,{path:o}=t,f=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(f),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var l;return(l=r)!=null?l:r=[t,...e()]}}}function Uu(n){return Ge(n)&&typeof n[Symbol.iterator]=="function"}function Ge(n){return typeof n=="object"&&n!=null}function Ie(n){return typeof n=="string"?JSON.stringify(n):""+n}function qu(n){const{done:t,value:e}=n.next();return t?void 0:e}function Fu(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=t,{type:o}=e,{refinement:f,message:l="Expected a value of type `"+o+"`"+(f?" with refinement `"+f+"`":"")+", but received: `"+Ie(r)+"`"}=n;return{value:r,type:o,refinement:f,key:i[i.length-1],path:i,branch:s,...n,message:l}}function*_i(n,t,e,r){Uu(n)||(n=[n]);for(const i of n){const s=Fu(i,t,e,r);s&&(yield s)}}function*Gs(n,t,e={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=e,f={path:r,branch:i};if(s&&(n=t.coercer(n,f),o&&t.type!=="type"&&Ge(t.schema)&&Ge(n)&&!Array.isArray(n)))for(const b in n)t.schema[b]===void 0&&delete n[b];let l=!0;for(const b of t.validator(n,f))l=!1,yield[b,void 0];for(let[b,x,S]of t.entries(n,f)){const T=Gs(x,S,{path:b===void 0?r:[...r,b],branch:b===void 0?i:[...i,x],coerce:s,mask:o});for(const M of T)M[0]?(l=!1,yield[M[0],void 0]):s&&(x=M[1],b===void 0?n=x:n instanceof Map?n.set(b,x):n instanceof Set?n.add(x):Ge(n)&&(n[b]=x))}if(l)for(const b of t.refiner(n,f))l=!1,yield[b,void 0];l&&(yield[void 0,n])}let Pe=class{constructor(t){const{type:e,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=o,i?this.validator=(l,b)=>{const x=i(l,b);return _i(x,b,this,l)}:this.validator=()=>[],s?this.refiner=(l,b)=>{const x=s(l,b);return _i(x,b,this,l)}:this.refiner=()=>[]}assert(t){return Du(t,this)}create(t){return H(t,this)}is(t){return Go(t,this)}mask(t){return zu(t,this)}validate(t,e={}){return Pr(t,this,e)}};function Du(n,t){const e=Pr(n,t);if(e[0])throw e[0]}function H(n,t){const e=Pr(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function zu(n,t){const e=Pr(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Go(n,t){return!Pr(n,t)[0]}function Pr(n,t,e={}){const r=Gs(n,t,e),i=qu(r);return i[0]?[new Nu(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function sr(n,t){return new Pe({type:n,schema:null,validator:t})}function Ku(){return sr("any",()=>!0)}function W(n){return new Pe({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Ie(t)}})}function Te(){return sr("boolean",n=>typeof n=="boolean")}function Vs(n){return sr("instance",t=>t instanceof n||"Expected a `"+n.name+"` instance, but received: "+Ie(t))}function Et(n){const t=Ie(n),e=typeof n;return new Pe({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+t+"`, but received: "+Ie(r)}})}function Hu(){return sr("never",()=>!1)}function $(n){return new Pe({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function B(){return sr("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Ie(n))}function rt(n){return new Pe({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Vo(n,t){return new Pe({type:"record",schema:null,*entries(e){if(Ge(e))for(const r in e){const i=e[r];yield[r,r,n],yield[r,i,t]}},validator(e){return Ge(e)||"Expected an object, but received: "+Ie(e)}})}function K(){return sr("string",n=>typeof n=="string"||"Expected a string, but received: "+Ie(n))}function Zs(n){const t=Hu();return new Pe({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let i=0;i<r;i++)yield[i,e[i],n[i]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+Ie(e)}})}function F(n){const t=Object.keys(n);return new Pe({type:"type",schema:n,*entries(e){if(Ge(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Ge(e)||"Expected an object, but received: "+Ie(e)}})}function me(n){const t=n.map(e=>e.type).join(" | ");return new Pe({type:"union",schema:null,validator(e,r){const i=[];for(const s of n){const[...o]=Gs(e,s,r),[f]=o;if(f[0])for(const[l]of o)l&&i.push(l);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Ie(e),...i]}})}function Nr(){return sr("unknown",()=>!0)}function Ur(n,t,e){return new Pe({...n,coercer:(r,i)=>Go(r,t)?n.coercer(e(r,i),i):n.coercer(r,i)})}const Zo=Yi(Ga),$u=Zo.v4,ju=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:n};if(i===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return $u()};s.id=o(s,r)}else i===2&&e===null?r.notificationIdNull&&(s.id=null):s.id=e;return s};var Wu=ju;const Gu=Zo.v4,Vu=Wu,Lr=function(n,t){if(!(this instanceof Lr))return new Lr(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Gu()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var Zu=Lr;Lr.prototype.request=function(n,t,e,r){const i=this;let s=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,s=n;else{typeof e=="function"&&(r=e,e=void 0);const b=typeof r=="function";try{s=Vu(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(b)return r(x);throw x}if(!b)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(b){return r(b)}return this.callServer(l,function(b,x){i._parseResponse(b,x,r)}),s};Lr.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(i){return e(i)}if(e.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return e(null,r.filter(i),r.filter(s))}else return e(null,r.error,r.result);e(null,r)};var Yo={},Tr={},Yu={get exports(){return Tr},set exports(n){Tr=n}};(function(n){function t(e){return e&&e.__esModule?e:{default:e}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(Yu);var Qr={},Ju={get exports(){return Qr},set exports(n){Qr=n}},tn={},Xu={get exports(){return tn},set exports(n){tn=n}},Si;function qr(){return Si||(Si=1,function(n){function t(e){"@babel/helpers - typeof";return n.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,t(e)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(Xu)),tn}var Ei;function Qu(){return Ei||(Ei=1,function(n){var t=qr().default;function e(){n.exports=e=function(){return i},n.exports.__esModule=!0,n.exports.default=n.exports;var r,i={},s=Object.prototype,o=s.hasOwnProperty,f=Object.defineProperty||function(p,m,h){p[m]=h.value},l=typeof Symbol=="function"?Symbol:{},b=l.iterator||"@@iterator",x=l.asyncIterator||"@@asyncIterator",S=l.toStringTag||"@@toStringTag";function T(p,m,h){return Object.defineProperty(p,m,{value:h,enumerable:!0,configurable:!0,writable:!0}),p[m]}try{T({},"")}catch{T=function(h,c,g){return h[c]=g}}function M(p,m,h,c){var g=m&&m.prototype instanceof O?m:O,C=Object.create(g.prototype),D=new w(c||[]);return f(C,"_invoke",{value:v(p,h,D)}),C}function k(p,m,h){try{return{type:"normal",arg:p.call(m,h)}}catch(c){return{type:"throw",arg:c}}}i.wrap=M;var _="suspendedStart",E="suspendedYield",L="executing",P="completed",R={};function O(){}function N(){}function A(){}var q={};T(q,b,function(){return this});var U=Object.getPrototypeOf,G=U&&U(U(y([])));G&&G!==s&&o.call(G,b)&&(q=G);var J=A.prototype=O.prototype=Object.create(q);function j(p){["next","throw","return"].forEach(function(m){T(p,m,function(h){return this._invoke(m,h)})})}function ct(p,m){function h(g,C,D,z){var V=k(p[g],p,C);if(V.type!=="throw"){var Q=V.arg,X=Q.value;return X&&t(X)=="object"&&o.call(X,"__await")?m.resolve(X.__await).then(function(pt){h("next",pt,D,z)},function(pt){h("throw",pt,D,z)}):m.resolve(X).then(function(pt){Q.value=pt,D(Q)},function(pt){return h("throw",pt,D,z)})}z(V.arg)}var c;f(this,"_invoke",{value:function(C,D){function z(){return new m(function(V,Q){h(C,D,V,Q)})}return c=c?c.then(z,z):z()}})}function v(p,m,h){var c=_;return function(g,C){if(c===L)throw new Error("Generator is already running");if(c===P){if(g==="throw")throw C;return{value:r,done:!0}}for(h.method=g,h.arg=C;;){var D=h.delegate;if(D){var z=a(D,h);if(z){if(z===R)continue;return z}}if(h.method==="next")h.sent=h._sent=h.arg;else if(h.method==="throw"){if(c===_)throw c=P,h.arg;h.dispatchException(h.arg)}else h.method==="return"&&h.abrupt("return",h.arg);c=L;var V=k(p,m,h);if(V.type==="normal"){if(c=h.done?P:E,V.arg===R)continue;return{value:V.arg,done:h.done}}V.type==="throw"&&(c=P,h.method="throw",h.arg=V.arg)}}}function a(p,m){var h=m.method,c=p.iterator[h];if(c===r)return m.delegate=null,h==="throw"&&p.iterator.return&&(m.method="return",m.arg=r,a(p,m),m.method==="throw")||h!=="return"&&(m.method="throw",m.arg=new TypeError("The iterator does not provide a '"+h+"' method")),R;var g=k(c,p.iterator,m.arg);if(g.type==="throw")return m.method="throw",m.arg=g.arg,m.delegate=null,R;var C=g.arg;return C?C.done?(m[p.resultName]=C.value,m.next=p.nextLoc,m.method!=="return"&&(m.method="next",m.arg=r),m.delegate=null,R):C:(m.method="throw",m.arg=new TypeError("iterator result is not an object"),m.delegate=null,R)}function u(p){var m={tryLoc:p[0]};1 in p&&(m.catchLoc=p[1]),2 in p&&(m.finallyLoc=p[2],m.afterLoc=p[3]),this.tryEntries.push(m)}function d(p){var m=p.completion||{};m.type="normal",delete m.arg,p.completion=m}function w(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(u,this),this.reset(!0)}function y(p){if(p||p===""){var m=p[b];if(m)return m.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var h=-1,c=function g(){for(;++h<p.length;)if(o.call(p,h))return g.value=p[h],g.done=!1,g;return g.value=r,g.done=!0,g};return c.next=c}}throw new TypeError(t(p)+" is not iterable")}return N.prototype=A,f(J,"constructor",{value:A,configurable:!0}),f(A,"constructor",{value:N,configurable:!0}),N.displayName=T(A,S,"GeneratorFunction"),i.isGeneratorFunction=function(p){var m=typeof p=="function"&&p.constructor;return!!m&&(m===N||(m.displayName||m.name)==="GeneratorFunction")},i.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,A):(p.__proto__=A,T(p,S,"GeneratorFunction")),p.prototype=Object.create(J),p},i.awrap=function(p){return{__await:p}},j(ct.prototype),T(ct.prototype,x,function(){return this}),i.AsyncIterator=ct,i.async=function(p,m,h,c,g){g===void 0&&(g=Promise);var C=new ct(M(p,m,h,c),g);return i.isGeneratorFunction(m)?C:C.next().then(function(D){return D.done?D.value:C.next()})},j(J),T(J,S,"Generator"),T(J,b,function(){return this}),T(J,"toString",function(){return"[object Generator]"}),i.keys=function(p){var m=Object(p),h=[];for(var c in m)h.push(c);return h.reverse(),function g(){for(;h.length;){var C=h.pop();if(C in m)return g.value=C,g.done=!1,g}return g.done=!0,g}},i.values=y,w.prototype={constructor:w,reset:function(m){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(d),!m)for(var h in this)h.charAt(0)==="t"&&o.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=r)},stop:function(){this.done=!0;var m=this.tryEntries[0].completion;if(m.type==="throw")throw m.arg;return this.rval},dispatchException:function(m){if(this.done)throw m;var h=this;function c(Q,X){return D.type="throw",D.arg=m,h.next=Q,X&&(h.method="next",h.arg=r),!!X}for(var g=this.tryEntries.length-1;g>=0;--g){var C=this.tryEntries[g],D=C.completion;if(C.tryLoc==="root")return c("end");if(C.tryLoc<=this.prev){var z=o.call(C,"catchLoc"),V=o.call(C,"finallyLoc");if(z&&V){if(this.prev<C.catchLoc)return c(C.catchLoc,!0);if(this.prev<C.finallyLoc)return c(C.finallyLoc)}else if(z){if(this.prev<C.catchLoc)return c(C.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return c(C.finallyLoc)}}}},abrupt:function(m,h){for(var c=this.tryEntries.length-1;c>=0;--c){var g=this.tryEntries[c];if(g.tryLoc<=this.prev&&o.call(g,"finallyLoc")&&this.prev<g.finallyLoc){var C=g;break}}C&&(m==="break"||m==="continue")&&C.tryLoc<=h&&h<=C.finallyLoc&&(C=null);var D=C?C.completion:{};return D.type=m,D.arg=h,C?(this.method="next",this.next=C.finallyLoc,R):this.complete(D)},complete:function(m,h){if(m.type==="throw")throw m.arg;return m.type==="break"||m.type==="continue"?this.next=m.arg:m.type==="return"?(this.rval=this.arg=m.arg,this.method="return",this.next="end"):m.type==="normal"&&h&&(this.next=h),R},finish:function(m){for(var h=this.tryEntries.length-1;h>=0;--h){var c=this.tryEntries[h];if(c.finallyLoc===m)return this.complete(c.completion,c.afterLoc),d(c),R}},catch:function(m){for(var h=this.tryEntries.length-1;h>=0;--h){var c=this.tryEntries[h];if(c.tryLoc===m){var g=c.completion;if(g.type==="throw"){var C=g.arg;d(c)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(m,h,c){return this.delegate={iterator:y(m),resultName:h,nextLoc:c},this.method==="next"&&(this.arg=r),R}},i}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(Ju)),Qr}var ts,ki;function tf(){if(ki)return ts;ki=1;var n=Qu()();ts=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}return ts}var en={},ef={get exports(){return en},set exports(n){en=n}},Bi;function rf(){return Bi||(Bi=1,function(n){function t(r,i,s,o,f,l,b){try{var x=r[l](b),S=x.value}catch(T){s(T);return}x.done?i(S):Promise.resolve(S).then(o,f)}function e(r){return function(){var i=this,s=arguments;return new Promise(function(o,f){var l=r.apply(i,s);function b(S){t(l,o,f,b,x,"next",S)}function x(S){t(l,o,f,b,x,"throw",S)}b(void 0)})}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(ef)),en}var rn={},nf={get exports(){return rn},set exports(n){rn=n}},Ai;function Ys(){return Ai||(Ai=1,function(n){function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(nf)),rn}var nn={},sf={get exports(){return nn},set exports(n){nn=n}},sn={},of={get exports(){return sn},set exports(n){sn=n}},on={},af={get exports(){return on},set exports(n){on=n}},Ii;function cf(){return Ii||(Ii=1,function(n){var t=qr().default;function e(r,i){if(t(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var o=s.call(r,i||"default");if(t(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(af)),on}var Mi;function uf(){return Mi||(Mi=1,function(n){var t=qr().default,e=cf();function r(i){var s=e(i,"string");return t(s)==="symbol"?s:String(s)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(of)),sn}var Ri;function Js(){return Ri||(Ri=1,function(n){var t=uf();function e(i,s){for(var o=0;o<s.length;o++){var f=s[o];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(i,t(f.key),f)}}function r(i,s,o){return s&&e(i.prototype,s),o&&e(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(sf)),nn}var an={},ff={get exports(){return an},set exports(n){an=n}},cn={},lf={get exports(){return cn},set exports(n){cn=n}},Li;function hf(){return Li||(Li=1,function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},n.exports.__esModule=!0,n.exports.default=n.exports,t(e,r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(lf)),cn}var Ti;function Jo(){return Ti||(Ti=1,function(n){var t=hf();function e(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&t(r,i)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(ff)),an}var un={},df={get exports(){return un},set exports(n){un=n}},fn={},pf={get exports(){return fn},set exports(n){fn=n}},Ci;function gf(){return Ci||(Ci=1,function(n){function t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(pf)),fn}var Oi;function Xo(){return Oi||(Oi=1,function(n){var t=qr().default,e=gf();function r(i,s){if(s&&(t(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e(i)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(df)),un}var ln={},mf={get exports(){return ln},set exports(n){ln=n}},Pi;function Qo(){return Pi||(Pi=1,function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},n.exports.__esModule=!0,n.exports.default=n.exports,t(e)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(mf)),ln}var ar={},Ni;function yf(){if(Ni)return ar;Ni=1;var n=Tr;Object.defineProperty(ar,"__esModule",{value:!0}),ar.DefaultDataPack=void 0,ar.createError=s;var t=n(Ys()),e=n(Js()),r=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]),i=function(){function o(){(0,t.default)(this,o)}return(0,e.default)(o,[{key:"encode",value:function(l){return JSON.stringify(l)}},{key:"decode",value:function(l){return JSON.parse(l)}}]),o}();ar.DefaultDataPack=i;function s(o,f){var l={code:o,message:r.get(o)||"Internal Server Error"};return f&&(l.data=f),l}return ar}(function(n){var t=Tr;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=t(tf()),r=t(rf()),i=t(qr()),s=t(Ys()),o=t(Js()),f=t(Jo()),l=t(Xo()),b=t(Qo()),x=Ji,S=yf();function T(E){var L=M();return function(){var R=(0,b.default)(E),O;if(L){var N=(0,b.default)(this).constructor;O=Reflect.construct(R,arguments,N)}else O=R.apply(this,arguments);return(0,l.default)(this,O)}}function M(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(E,L){var P={};for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&&L.indexOf(R)<0&&(P[R]=E[R]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,R=Object.getOwnPropertySymbols(E);O<R.length;O++)L.indexOf(R[O])<0&&Object.prototype.propertyIsEnumerable.call(E,R[O])&&(P[R[O]]=E[R[O]]);return P},_=function(E){(0,f.default)(P,E);var L=T(P);function P(R){var O,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},q=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;(0,s.default)(this,P);var G=A.autoconnect,J=G===void 0?!0:G,j=A.reconnect,ct=j===void 0?!0:j,v=A.reconnect_interval,a=v===void 0?1e3:v,u=A.max_reconnects,d=u===void 0?5:u,w=k(A,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return O=L.call(this),O.webSocketFactory=R,O.queue={},O.rpc_id=0,O.address=N,O.autoconnect=J,O.ready=!1,O.reconnect=ct,O.reconnect_timer_id=void 0,O.reconnect_interval=a,O.max_reconnects=d,O.rest_options=w,O.current_reconnects=0,O.generate_request_id=q||function(){return++O.rpc_id},U?O.dataPack=U:O.dataPack=new S.DefaultDataPack,O.autoconnect&&O._connect(O.address,Object.assign({autoconnect:O.autoconnect,reconnect:O.reconnect,reconnect_interval:O.reconnect_interval,max_reconnects:O.max_reconnects},O.rest_options)),O}return(0,o.default)(P,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(O,N,A,q){var U=this;return!q&&(0,i.default)(A)==="object"&&(q=A,A=null),new Promise(function(G,J){if(!U.ready)return J(new Error("socket not ready"));var j=U.generate_request_id(O,N),ct={jsonrpc:"2.0",method:O,params:N||null,id:j};U.socket.send(U.dataPack.encode(ct),q,function(v){if(v)return J(v);U.queue[j]={promise:[G,J]},A&&(U.queue[j].timeout=setTimeout(function(){delete U.queue[j],J(new Error("reply timeout"))},A))})})}},{key:"login",value:function(){var R=(0,r.default)(e.default.mark(function N(A){var q;return e.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,this.call("rpc.login",A);case 2:if(q=G.sent,q){G.next=5;break}throw new Error("authentication failed");case 5:return G.abrupt("return",q);case 6:case"end":return G.stop()}},N,this)}));function O(N){return R.apply(this,arguments)}return O}()},{key:"listMethods",value:function(){var R=(0,r.default)(e.default.mark(function N(){return e.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.call("__listMethods");case 2:return q.abrupt("return",q.sent);case 3:case"end":return q.stop()}},N,this)}));function O(){return R.apply(this,arguments)}return O}()},{key:"notify",value:function(O,N){var A=this;return new Promise(function(q,U){if(!A.ready)return U(new Error("socket not ready"));var G={jsonrpc:"2.0",method:O,params:N||null};A.socket.send(A.dataPack.encode(G),function(J){if(J)return U(J);q()})})}},{key:"subscribe",value:function(){var R=(0,r.default)(e.default.mark(function N(A){var q;return e.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return typeof A=="string"&&(A=[A]),G.next=3,this.call("rpc.on",A);case 3:if(q=G.sent,!(typeof A=="string"&&q[A]!=="ok")){G.next=6;break}throw new Error("Failed subscribing to an event '"+A+"' with: "+q[A]);case 6:return G.abrupt("return",q);case 7:case"end":return G.stop()}},N,this)}));function O(N){return R.apply(this,arguments)}return O}()},{key:"unsubscribe",value:function(){var R=(0,r.default)(e.default.mark(function N(A){var q;return e.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return typeof A=="string"&&(A=[A]),G.next=3,this.call("rpc.off",A);case 3:if(q=G.sent,!(typeof A=="string"&&q[A]!=="ok")){G.next=6;break}throw new Error("Failed unsubscribing from an event with: "+q);case 6:return G.abrupt("return",q);case 7:case"end":return G.stop()}},N,this)}));function O(N){return R.apply(this,arguments)}return O}()},{key:"close",value:function(O,N){this.socket.close(O||1e3,N)}},{key:"_connect",value:function(O,N){var A=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(O,N),this.socket.addEventListener("open",function(){A.ready=!0,A.emit("open"),A.current_reconnects=0}),this.socket.addEventListener("message",function(q){var U=q.data;U instanceof ArrayBuffer&&(U=Buffer.from(U).toString());try{U=A.dataPack.decode(U)}catch{return}if(U.notification&&A.listeners(U.notification).length){if(!Object.keys(U.params).length)return A.emit(U.notification);var G=[U.notification];if(U.params.constructor===Object)G.push(U.params);else for(var J=0;J<U.params.length;J++)G.push(U.params[J]);return Promise.resolve().then(function(){A.emit.apply(A,G)})}if(!A.queue[U.id])return U.method&&U.params?Promise.resolve().then(function(){A.emit(U.method,U.params)}):void 0;"error"in U=="result"in U&&A.queue[U.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),A.queue[U.id].timeout&&clearTimeout(A.queue[U.id].timeout),U.error?A.queue[U.id].promise[1](U.error):A.queue[U.id].promise[0](U.result),delete A.queue[U.id]}),this.socket.addEventListener("error",function(q){return A.emit("error",q)}),this.socket.addEventListener("close",function(q){var U=q.code,G=q.reason;A.ready&&setTimeout(function(){return A.emit("close",U,G)},0),A.ready=!1,A.socket=void 0,U!==1e3&&(A.current_reconnects++,A.reconnect&&(A.max_reconnects>A.current_reconnects||A.max_reconnects===0)&&(A.reconnect_timer_id=setTimeout(function(){return A._connect(O,N)},A.reconnect_interval)))})}}]),P}(x.EventEmitter);n.default=_})(Yo);const wf=Xi(Yo);var ta={};(function(n){var t=Tr;Object.defineProperty(n,"__esModule",{value:!0}),n.default=S;var e=t(Ys()),r=t(Js()),i=t(Jo()),s=t(Xo()),o=t(Qo()),f=Ji;function l(T){var M=b();return function(){var _=(0,o.default)(T),E;if(M){var L=(0,o.default)(this).constructor;E=Reflect.construct(_,arguments,L)}else E=_.apply(this,arguments);return(0,s.default)(this,E)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x=function(T){(0,i.default)(k,T);var M=l(k);function k(_,E,L){var P;return(0,e.default)(this,k),P=M.call(this),P.socket=new window.WebSocket(_,L),P.socket.onopen=function(){return P.emit("open")},P.socket.onmessage=function(R){return P.emit("message",R.data)},P.socket.onerror=function(R){return P.emit("error",R)},P.socket.onclose=function(R){P.emit("close",R.code,R.reason)},P}return(0,r.default)(k,[{key:"send",value:function(E,L,P){var R=P||L;try{this.socket.send(E),R()}catch(O){R(O)}}},{key:"close",value:function(E,L){this.socket.close(E,L)}},{key:"addEventListener",value:function(E,L,P){this.socket.addEventListener(E,L,P)}}]),k}(f.EventEmitter);function S(T,M){return new x(T,M)}})(ta);const bf=Xi(ta);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vf(n){const t=Os(n);br(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:i}=t;if(e){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:xf,hexToBytes:_f}=Oc,Xe={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=Xe;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:xf(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=Xe,e=typeof n=="string"?_f(n):n;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Xe._parseInt(e.subarray(2)),{d:o,l:f}=Xe._parseInt(s);if(f.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const t=b=>Number.parseInt(b[0],16)&8?"00"+b:b,e=b=>{const x=b.toString(16);return x.length&1?`0${x}`:x},r=t(e(n.s)),i=t(e(n.r)),s=r.length/2,o=i.length/2,f=e(s),l=e(o);return`30${e(o+s+4)}02${l}${i}02${f}${r}`}},Ue=BigInt(0),ve=BigInt(1);BigInt(2);const Ui=BigInt(3);BigInt(4);function Sf(n){const t=vf(n),{Fp:e}=t,r=t.toBytes||((k,_,E)=>{const L=_.toAffine();return rr(Uint8Array.from([4]),e.toBytes(L.x),e.toBytes(L.y))}),i=t.fromBytes||(k=>{const _=k.subarray(1),E=e.fromBytes(_.subarray(0,e.BYTES)),L=e.fromBytes(_.subarray(e.BYTES,2*e.BYTES));return{x:E,y:L}});function s(k){const{a:_,b:E}=t,L=e.sqr(k),P=e.mul(L,k);return e.add(e.add(P,e.mul(k,_)),E)}if(!e.eql(e.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(k){return typeof k=="bigint"&&Ue<k&&k<t.n}function f(k){if(!o(k))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(k){const{allowedPrivateKeyLengths:_,nByteLength:E,wrapPrivateKey:L,n:P}=t;if(_&&typeof k!="bigint"){if(k instanceof Uint8Array&&(k=er(k)),typeof k!="string"||!_.includes(k.length))throw new Error("Invalid key");k=k.padStart(E*2,"0")}let R;try{R=typeof k=="bigint"?k:Qe(ie("private key",k,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof k}`)}return L&&(R=wt(R,P)),f(R),R}const b=new Map;function x(k){if(!(k instanceof S))throw new Error("ProjectivePoint expected")}class S{constructor(_,E,L){if(this.px=_,this.py=E,this.pz=L,_==null||!e.isValid(_))throw new Error("x required");if(E==null||!e.isValid(E))throw new Error("y required");if(L==null||!e.isValid(L))throw new Error("z required")}static fromAffine(_){const{x:E,y:L}=_||{};if(!_||!e.isValid(E)||!e.isValid(L))throw new Error("invalid affine point");if(_ instanceof S)throw new Error("projective point not allowed");const P=R=>e.eql(R,e.ZERO);return P(E)&&P(L)?S.ZERO:new S(E,L,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){const E=e.invertBatch(_.map(L=>L.pz));return _.map((L,P)=>L.toAffine(E[P])).map(S.fromAffine)}static fromHex(_){const E=S.fromAffine(i(ie("pointHex",_)));return E.assertValidity(),E}static fromPrivateKey(_){return S.BASE.multiply(l(_))}_setWindowSize(_){this._WINDOW_SIZE=_,b.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:_,y:E}=this.toAffine();if(!e.isValid(_)||!e.isValid(E))throw new Error("bad point: x or y not FE");const L=e.sqr(E),P=s(_);if(!e.eql(L,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:_}=this.toAffine();if(e.isOdd)return!e.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){x(_);const{px:E,py:L,pz:P}=this,{px:R,py:O,pz:N}=_,A=e.eql(e.mul(E,N),e.mul(R,P)),q=e.eql(e.mul(L,N),e.mul(O,P));return A&&q}negate(){return new S(this.px,e.neg(this.py),this.pz)}double(){const{a:_,b:E}=t,L=e.mul(E,Ui),{px:P,py:R,pz:O}=this;let N=e.ZERO,A=e.ZERO,q=e.ZERO,U=e.mul(P,P),G=e.mul(R,R),J=e.mul(O,O),j=e.mul(P,R);return j=e.add(j,j),q=e.mul(P,O),q=e.add(q,q),N=e.mul(_,q),A=e.mul(L,J),A=e.add(N,A),N=e.sub(G,A),A=e.add(G,A),A=e.mul(N,A),N=e.mul(j,N),q=e.mul(L,q),J=e.mul(_,J),j=e.sub(U,J),j=e.mul(_,j),j=e.add(j,q),q=e.add(U,U),U=e.add(q,U),U=e.add(U,J),U=e.mul(U,j),A=e.add(A,U),J=e.mul(R,O),J=e.add(J,J),U=e.mul(J,j),N=e.sub(N,U),q=e.mul(J,G),q=e.add(q,q),q=e.add(q,q),new S(N,A,q)}add(_){x(_);const{px:E,py:L,pz:P}=this,{px:R,py:O,pz:N}=_;let A=e.ZERO,q=e.ZERO,U=e.ZERO;const G=t.a,J=e.mul(t.b,Ui);let j=e.mul(E,R),ct=e.mul(L,O),v=e.mul(P,N),a=e.add(E,L),u=e.add(R,O);a=e.mul(a,u),u=e.add(j,ct),a=e.sub(a,u),u=e.add(E,P);let d=e.add(R,N);return u=e.mul(u,d),d=e.add(j,v),u=e.sub(u,d),d=e.add(L,P),A=e.add(O,N),d=e.mul(d,A),A=e.add(ct,v),d=e.sub(d,A),U=e.mul(G,u),A=e.mul(J,v),U=e.add(A,U),A=e.sub(ct,U),U=e.add(ct,U),q=e.mul(A,U),ct=e.add(j,j),ct=e.add(ct,j),v=e.mul(G,v),u=e.mul(J,u),ct=e.add(ct,v),v=e.sub(j,v),v=e.mul(G,v),u=e.add(u,v),j=e.mul(ct,u),q=e.add(q,j),j=e.mul(d,u),A=e.mul(a,A),A=e.sub(A,j),j=e.mul(a,ct),U=e.mul(d,U),U=e.add(U,j),new S(A,q,U)}subtract(_){return this.add(_.negate())}is0(){return this.equals(S.ZERO)}wNAF(_){return M.wNAFCached(this,b,_,E=>{const L=e.invertBatch(E.map(P=>P.pz));return E.map((P,R)=>P.toAffine(L[R])).map(S.fromAffine)})}multiplyUnsafe(_){const E=S.ZERO;if(_===Ue)return E;if(f(_),_===ve)return this;const{endo:L}=t;if(!L)return M.unsafeLadder(this,_);let{k1neg:P,k1:R,k2neg:O,k2:N}=L.splitScalar(_),A=E,q=E,U=this;for(;R>Ue||N>Ue;)R&ve&&(A=A.add(U)),N&ve&&(q=q.add(U)),U=U.double(),R>>=ve,N>>=ve;return P&&(A=A.negate()),O&&(q=q.negate()),q=new S(e.mul(q.px,L.beta),q.py,q.pz),A.add(q)}multiply(_){f(_);let E=_,L,P;const{endo:R}=t;if(R){const{k1neg:O,k1:N,k2neg:A,k2:q}=R.splitScalar(E);let{p:U,f:G}=this.wNAF(N),{p:J,f:j}=this.wNAF(q);U=M.constTimeNegate(O,U),J=M.constTimeNegate(A,J),J=new S(e.mul(J.px,R.beta),J.py,J.pz),L=U.add(J),P=G.add(j)}else{const{p:O,f:N}=this.wNAF(E);L=O,P=N}return S.normalizeZ([L,P])[0]}multiplyAndAddUnsafe(_,E,L){const P=S.BASE,R=(N,A)=>A===Ue||A===ve||!N.equals(P)?N.multiplyUnsafe(A):N.multiply(A),O=R(this,E).add(R(_,L));return O.is0()?void 0:O}toAffine(_){const{px:E,py:L,pz:P}=this,R=this.is0();_==null&&(_=R?e.ONE:e.inv(P));const O=e.mul(E,_),N=e.mul(L,_),A=e.mul(P,_);if(R)return{x:e.ZERO,y:e.ZERO};if(!e.eql(A,e.ONE))throw new Error("invZ was invalid");return{x:O,y:N}}isTorsionFree(){const{h:_,isTorsionFree:E}=t;if(_===ve)return!0;if(E)return E(S,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:_,clearCofactor:E}=t;return _===ve?this:E?E(S,this):this.multiplyUnsafe(t.h)}toRawBytes(_=!0){return this.assertValidity(),r(S,this,_)}toHex(_=!0){return er(this.toRawBytes(_))}}S.BASE=new S(t.Gx,t.Gy,e.ONE),S.ZERO=new S(e.ZERO,e.ONE,e.ZERO);const T=t.nBitLength,M=vo(S,t.endo?Math.ceil(T/2):T);return{CURVE:t,ProjectivePoint:S,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function Ef(n){const t=Os(n);return br(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function kf(n){const t=Ef(n),{Fp:e,n:r}=t,i=e.BYTES+1,s=2*e.BYTES+1;function o(u){return Ue<u&&u<e.ORDER}function f(u){return wt(u,r)}function l(u){return os(u,r)}const{ProjectivePoint:b,normPrivateKeyToScalar:x,weierstrassEquation:S,isWithinCurveOrder:T}=Sf({...t,toBytes(u,d,w){const y=d.toAffine(),p=e.toBytes(y.x),m=rr;return w?m(Uint8Array.from([d.hasEvenY()?2:3]),p):m(Uint8Array.from([4]),p,e.toBytes(y.y))},fromBytes(u){const d=u.length,w=u[0],y=u.subarray(1);if(d===i&&(w===2||w===3)){const p=Qe(y);if(!o(p))throw new Error("Point is not on curve");const m=S(p);let h=e.sqrt(m);const c=(h&ve)===ve;return(w&1)===1!==c&&(h=e.neg(h)),{x:p,y:h}}else if(d===s&&w===4){const p=e.fromBytes(y.subarray(0,e.BYTES)),m=e.fromBytes(y.subarray(e.BYTES,2*e.BYTES));return{x:p,y:m}}else throw new Error(`Point of length ${d} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),M=u=>er(gr(u,t.nByteLength));function k(u){const d=r>>ve;return u>d}function _(u){return k(u)?f(-u):u}const E=(u,d,w)=>Qe(u.slice(d,w));class L{constructor(d,w,y){this.r=d,this.s=w,this.recovery=y,this.assertValidity()}static fromCompact(d){const w=t.nByteLength;return d=ie("compactSignature",d,w*2),new L(E(d,0,w),E(d,w,2*w))}static fromDER(d){const{r:w,s:y}=Xe.toSig(ie("DER",d));return new L(w,y)}assertValidity(){if(!T(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!T(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(d){return new L(this.r,this.s,d)}recoverPublicKey(d){const{r:w,s:y,recovery:p}=this,m=q(ie("msgHash",d));if(p==null||![0,1,2,3].includes(p))throw new Error("recovery id invalid");const h=p===2||p===3?w+t.n:w;if(h>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const c=p&1?"03":"02",g=b.fromHex(c+M(h)),C=l(h),D=f(-m*C),z=f(y*C),V=b.BASE.multiplyAndAddUnsafe(g,D,z);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return pr(this.toDERHex())}toDERHex(){return Xe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return pr(this.toCompactHex())}toCompactHex(){return M(this.r)+M(this.s)}}const P={isValidPrivateKey(u){try{return x(u),!0}catch{return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{const u=bo(t.n);return jc(t.randomBytes(u),t.n)},precompute(u=8,d=b.BASE){return d._setWindowSize(u),d.multiply(BigInt(3)),d}};function R(u,d=!0){return b.fromPrivateKey(u).toRawBytes(d)}function O(u){const d=u instanceof Uint8Array,w=typeof u=="string",y=(d||w)&&u.length;return d?y===i||y===s:w?y===2*i||y===2*s:u instanceof b}function N(u,d,w=!0){if(O(u))throw new Error("first arg must be private key");if(!O(d))throw new Error("second arg must be public key");return b.fromHex(d).multiply(x(u)).toRawBytes(w)}const A=t.bits2int||function(u){const d=Qe(u),w=u.length*8-t.nBitLength;return w>0?d>>BigInt(w):d},q=t.bits2int_modN||function(u){return f(A(u))},U=Cs(t.nBitLength);function G(u){if(typeof u!="bigint")throw new Error("bigint expected");if(!(Ue<=u&&u<U))throw new Error(`bigint expected < 2^${t.nBitLength}`);return gr(u,t.nByteLength)}function J(u,d,w=j){if(["recovered","canonical"].some(X=>X in w))throw new Error("sign() legacy options not supported");const{hash:y,randomBytes:p}=t;let{lowS:m,prehash:h,extraEntropy:c}=w;m==null&&(m=!0),u=ie("msgHash",u),h&&(u=ie("prehashed msgHash",y(u)));const g=q(u),C=x(d),D=[G(C),G(g)];if(c!=null){const X=c===!0?p(e.BYTES):c;D.push(ie("extraEntropy",X))}const z=rr(...D),V=g;function Q(X){const pt=A(X);if(!T(pt))return;const at=l(pt),st=b.BASE.multiply(pt).toAffine(),se=f(st.x);if(se===Ue)return;const ht=f(at*f(V+se*C));if(ht===Ue)return;let gt=(st.x===se?0:2)|Number(st.y&ve),Fe=ht;return m&&k(ht)&&(Fe=_(ht),gt^=1),new L(se,Fe,gt)}return{seed:z,k2sig:Q}}const j={lowS:t.lowS,prehash:!1},ct={lowS:t.lowS,prehash:!1};function v(u,d,w=j){const{seed:y,k2sig:p}=J(u,d,w),m=t;return go(m.hash.outputLen,m.nByteLength,m.hmac)(y,p)}b.BASE._setWindowSize(8);function a(u,d,w,y=ct){const p=u;if(d=ie("msgHash",d),w=ie("publicKey",w),"strict"in y)throw new Error("options.strict was renamed to lowS");const{lowS:m,prehash:h}=y;let c,g;try{if(typeof p=="string"||p instanceof Uint8Array)try{c=L.fromDER(p)}catch(st){if(!(st instanceof Xe.Err))throw st;c=L.fromCompact(p)}else if(typeof p=="object"&&typeof p.r=="bigint"&&typeof p.s=="bigint"){const{r:st,s:se}=p;c=new L(st,se)}else throw new Error("PARSE");g=b.fromHex(w)}catch(st){if(st.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(m&&c.hasHighS())return!1;h&&(d=t.hash(d));const{r:C,s:D}=c,z=q(d),V=l(D),Q=f(z*V),X=f(C*V),pt=b.BASE.multiplyAndAddUnsafe(g,Q,X)?.toAffine();return pt?f(pt.x)===C:!1}return{CURVE:t,getPublicKey:R,getSharedSecret:N,sign:v,verify:a,ProjectivePoint:b,Signature:L,utils:P}}class ea extends oo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ya(t);const r=Ls(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return Gr(this),this.iHash.update(t),this}digestInto(t){Gr(this),ro(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:f}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=f,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ra=(n,t,e)=>new ea(n,t).update(e).digest();ra.create=(n,t)=>new ea(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bf(n){return{hash:n,hmac:(t,...e)=>ra(n,t,io(...e)),randomBytes:co}}function Af(n,t){const e=r=>kf({...n,...Bf(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const na=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),qi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),If=BigInt(1),fs=BigInt(2),Fi=(n,t)=>(n+t/fs)/t;function Mf(n){const t=na,e=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),f=BigInt(44),l=BigInt(88),b=n*n*n%t,x=b*b*n%t,S=Tt(x,e,t)*x%t,T=Tt(S,e,t)*x%t,M=Tt(T,fs,t)*b%t,k=Tt(M,i,t)*M%t,_=Tt(k,s,t)*k%t,E=Tt(_,f,t)*_%t,L=Tt(E,l,t)*E%t,P=Tt(L,f,t)*_%t,R=Tt(P,e,t)*x%t,O=Tt(R,o,t)*k%t,N=Tt(O,r,t)*b%t,A=Tt(N,fs,t);if(!ls.eql(ls.sqr(A),n))throw new Error("Cannot find square root");return A}const ls=yo(na,void 0,void 0,{sqrt:Mf}),Xs=Af({a:BigInt(0),b:BigInt(7),Fp:ls,n:qi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=qi,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-If*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,o=BigInt("0x100000000000000000000000000000000"),f=Fi(s*n,t),l=Fi(-r*n,t);let b=wt(n-f*e-l*i,t),x=wt(-f*r-l*s,t);const S=b>o,T=x>o;if(S&&(b=t-b),T&&(x=t-x),b>o||x>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:S,k1:b,k2neg:T,k2:x}}}},cs);BigInt(0);Xs.ProjectivePoint;wn.utils.randomPrivateKey;function Di(n){try{return wn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Rf=(n,t)=>wn.sign(n,t.slice(0,32)),Lf=wn.verify,yr=n=>nt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?nt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):nt.Buffer.from(n);class Tf{constructor(t){Object.assign(this,t)}encode(){return nt.Buffer.from(Io(jr,this))}static decode(t){return Mo(jr,this,t)}static decodeUnchecked(t){return So(jr,this,t)}}const jr=new Map;var sa;let ia;const Cf=32,Le=32;function Of(n){return n._bn!==void 0}let zi=1;ia=Symbol.toStringTag;class et extends Tf{constructor(t){if(super({}),this._bn=void 0,Of(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Pt.decode(t);if(e.length!=Le)throw new Error("Invalid public key input");this._bn=new Mr(e)}else this._bn=new Mr(t);if(this._bn.byteLength()>Le)throw new Error("Invalid public key input")}}static unique(){const t=new et(zi);return zi+=1,new et(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Pt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(nt.Buffer);if(t.length===Le)return t;const e=nt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[ia](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=nt.Buffer.concat([t.toBuffer(),nt.Buffer.from(e),r.toBuffer()]),s=cs(i);return new et(s)}static createProgramAddressSync(t,e){let r=nt.Buffer.alloc(0);t.forEach(function(s){if(s.length>Cf)throw new TypeError("Max seed length exceeded");r=nt.Buffer.concat([r,yr(s)])}),r=nt.Buffer.concat([r,e.toBuffer(),nt.Buffer.from("ProgramDerivedAddress")]);const i=cs(r);if(Di(i))throw new Error("Invalid seeds, address must fall off the curve");return new et(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,i;for(;r!=0;){try{const s=t.concat(nt.Buffer.from([r]));i=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new et(t);return Di(e.toBytes())}}sa=et;et.default=new sa("11111111111111111111111111111111");jr.set(et,{kind:"struct",fields:[["_bn","u256"]]});new et("BPFLoader1111111111111111111111111111111111");const dr=1280-40-8,oa=127,hs=64;class aa extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(aa.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ca extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ca.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Ar extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ar.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class hn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const ut=(n="publicKey")=>Ct(32,n),lr=(n="string")=>{const t=Y([tt("length"),tt("lengthPadding"),Ct(tr(tt(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),i=t;return i.decode=(s,o)=>e(s,o).chars.toString(),i.encode=(s,o,f)=>{const l={chars:nt.Buffer.from(s,"utf8")};return r(l,o,f)},i.alloc=s=>tt().span+tt().span+nt.Buffer.from(s,"utf8").length,i},Pf=(n="authorized")=>Y([ut("staker"),ut("withdrawer")],n),Nf=(n="lockup")=>Y([we("unixTimestamp"),we("epoch"),ut("custodian")],n),Uf=(n="voteInit")=>Y([ut("nodePubkey"),ut("authorizedVoter"),ut("authorizedWithdrawer"),lt("commission")],n),qf=(n="voteAuthorizeWithSeedArgs")=>Y([tt("voteAuthorizationType"),ut("currentAuthorityDerivedKeyOwnerPubkey"),lr("currentAuthorityDerivedKeySeed"),ut("newAuthorized")],n);function _e(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Se(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function re(n,t){if(!n)throw new Error(t||"Assertion failed")}class _n{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,i=o=>{const f=o.toBase58();let l=r.get(f);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,l)),l},s=i(e);s.isSigner=!0,s.isWritable=!0;for(const o of t){i(o.programId).isInvoked=!0;for(const f of o.keys){const l=i(f.pubkey);l.isSigner||=f.isSigner,l.isWritable||=f.isWritable}}return new _n(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];re(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,l])=>l.isSigner&&l.isWritable),r=t.filter(([,l])=>l.isSigner&&!l.isWritable),i=t.filter(([,l])=>!l.isSigner&&l.isWritable),s=t.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{re(e.length>0,"Expected at least one writable signer key");const[l]=e[0];re(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const f=[...e.map(([l])=>new et(l)),...r.map(([l])=>new et(l)),...i.map(([l])=>new et(l)),...s.map(([l])=>new et(l))];return[o,f]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(t,e){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(e(o)){const f=new et(s),l=t.findIndex(b=>b.equals(f));l>=0&&(re(l<256,"Max lookup table index exceeded"),r.push(l),i.push(f),this.keyMetaMap.delete(s))}return[r,i]}}class Ve{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new et(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Pt.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new hn(this.staticAccountKeys)}static compile(t){const e=_n.compile(t.instructions,t.payerKey),[r,i]=e.getMessageComponents(),o=new hn(i).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:Pt.encode(f.data)}));return new Ve({header:r,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Se(e,t);const r=this.instructions.map(S=>{const{accounts:T,programIdIndex:M}=S,k=Array.from(Pt.decode(S.data));let _=[];Se(_,T.length);let E=[];return Se(E,k.length),{programIdIndex:M,keyIndicesCount:nt.Buffer.from(_),keyIndices:T,dataLength:nt.Buffer.from(E),data:k}});let i=[];Se(i,r.length);let s=nt.Buffer.alloc(dr);nt.Buffer.from(i).copy(s);let o=i.length;r.forEach(S=>{const M=Y([lt("programIdIndex"),Ct(S.keyIndicesCount.length,"keyIndicesCount"),pe(lt("keyIndex"),S.keyIndices.length,"keyIndices"),Ct(S.dataLength.length,"dataLength"),pe(lt("userdatum"),S.data.length,"data")]).encode(S,s,o);o+=M}),s=s.slice(0,o);const f=Y([Ct(1,"numRequiredSignatures"),Ct(1,"numReadonlySignedAccounts"),Ct(1,"numReadonlyUnsignedAccounts"),Ct(e.length,"keyCount"),pe(ut("key"),t,"keys"),ut("recentBlockhash")]),l={numRequiredSignatures:nt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:nt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:nt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:nt.Buffer.from(e),keys:this.accountKeys.map(S=>yr(S.toBytes())),recentBlockhash:Pt.decode(this.recentBlockhash)};let b=nt.Buffer.alloc(2048);const x=f.encode(l,b);return s.copy(b,x),b.slice(0,x+s.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&oa))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),s=e.shift(),o=_e(e);let f=[];for(let T=0;T<o;T++){const M=e.slice(0,Le);e=e.slice(Le),f.push(new et(nt.Buffer.from(M)))}const l=e.slice(0,Le);e=e.slice(Le);const b=_e(e);let x=[];for(let T=0;T<b;T++){const M=e.shift(),k=_e(e),_=e.slice(0,k);e=e.slice(k);const E=_e(e),L=e.slice(0,E),P=Pt.encode(nt.Buffer.from(L));e=e.slice(E),x.push({programIdIndex:M,accounts:_,data:P})}const S={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Pt.encode(nt.Buffer.from(l)),accountKeys:f,instructions:x};return new Ve(S)}}class dn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new hn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const i=t-r,s=this.addressTableLookups.reduce((o,f)=>o+f.writableIndexes.length,0);return i<s}else if(t>=this.header.numRequiredSignatures){const i=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=t.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)e.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)e.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=_n.compile(t.instructions,t.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const x of s){const S=e.extractTableLookup(x);if(S!==void 0){const[T,{writable:M,readonly:k}]=S;r.push(T),i.writable.push(...M),i.readonly.push(...k)}}const[o,f]=e.getMessageComponents(),b=new hn(f,i).compileInstructions(t.instructions);return new dn({header:o,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:r})}serialize(){const t=Array();Se(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Se(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Se(s,this.addressTableLookups.length);const o=Y([lt("prefix"),Y([lt("numRequiredSignatures"),lt("numReadonlySignedAccounts"),lt("numReadonlyUnsignedAccounts")],"header"),Ct(t.length,"staticAccountKeysLength"),pe(ut(),this.staticAccountKeys.length,"staticAccountKeys"),ut("recentBlockhash"),Ct(r.length,"instructionsLength"),Ct(e.length,"serializedInstructions"),Ct(s.length,"addressTableLookupsLength"),Ct(i.length,"serializedAddressTableLookups")]),f=new Uint8Array(dr),l=128,b=o.encode({prefix:l,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(x=>x.toBytes()),recentBlockhash:Pt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},f);return f.slice(0,b)}serializeInstructions(){let t=0;const e=new Uint8Array(dr);for(const r of this.compiledInstructions){const i=Array();Se(i,r.accountKeyIndexes.length);const s=Array();Se(s,r.data.length);const o=Y([lt("programIdIndex"),Ct(i.length,"encodedAccountKeyIndexesLength"),pe(lt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ct(s.length,"encodedDataLength"),Ct(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(dr);for(const r of this.addressTableLookups){const i=Array();Se(i,r.writableIndexes.length);const s=Array();Se(s,r.readonlyIndexes.length);const o=Y([ut("accountKey"),Ct(i.length,"encodedWritableIndexesLength"),pe(lt(),r.writableIndexes.length,"writableIndexes"),Ct(s.length,"encodedReadonlyIndexesLength"),pe(lt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),i=r&oa;re(r!==i,"Expected versioned message but received legacy message");const s=i;re(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},f=[],l=_e(e);for(let k=0;k<l;k++)f.push(new et(e.splice(0,Le)));const b=Pt.encode(e.splice(0,Le)),x=_e(e),S=[];for(let k=0;k<x;k++){const _=e.shift(),E=_e(e),L=e.splice(0,E),P=_e(e),R=new Uint8Array(e.splice(0,P));S.push({programIdIndex:_,accountKeyIndexes:L,data:R})}const T=_e(e),M=[];for(let k=0;k<T;k++){const _=new et(e.splice(0,Le)),E=_e(e),L=e.splice(0,E),P=_e(e),R=e.splice(0,P);M.push({accountKey:_,writableIndexes:L,readonlyIndexes:R})}return new dn({header:o,staticAccountKeys:f,recentBlockhash:b,compiledInstructions:S,addressTableLookups:M})}}let $e=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Ff=nt.Buffer.alloc(hs).fill(0);class Ki{constructor(t){this.keys=void 0,this.programId=void 0,this.data=nt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Re{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ki(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let _=0;_<e.length;_++)if(e[_].programId===void 0)throw new Error(`Transaction instruction index ${_} has undefined program id`);const i=[],s=[];e.forEach(_=>{_.keys.forEach(L=>{s.push({...L})});const E=_.programId.toString();i.includes(E)||i.push(E)}),i.forEach(_=>{s.push({pubkey:new et(_),isSigner:!1,isWritable:!1})});const o=[];s.forEach(_=>{const E=_.pubkey.toString(),L=o.findIndex(P=>P.pubkey.toString()===E);L>-1?(o[L].isWritable=o[L].isWritable||_.isWritable,o[L].isSigner=o[L].isSigner||_.isSigner):o.push(_)}),o.sort(function(_,E){if(_.isSigner!==E.isSigner)return _.isSigner?-1:1;if(_.isWritable!==E.isWritable)return _.isWritable?-1:1;const L={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return _.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",L)});const f=o.findIndex(_=>_.pubkey.equals(r));if(f>-1){const[_]=o.splice(f,1);_.isSigner=!0,_.isWritable=!0,o.unshift(_)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const _ of this.signatures){const E=o.findIndex(L=>L.pubkey.equals(_.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${_.publicKey.toString()}`)}let l=0,b=0,x=0;const S=[],T=[];o.forEach(({pubkey:_,isSigner:E,isWritable:L})=>{E?(S.push(_.toString()),l+=1,L||(b+=1)):(T.push(_.toString()),L||(x+=1))});const M=S.concat(T),k=e.map(_=>{const{data:E,programId:L}=_;return{programIdIndex:M.indexOf(L.toString()),accounts:_.keys.map(P=>M.indexOf(P.pubkey.toString())),data:Pt.encode(E)}});return k.forEach(_=>{re(_.programIdIndex>=0),_.accounts.forEach(E=>re(E>=0))}),new Ve({header:{numRequiredSignatures:l,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:x},accountKeys:M,recentBlockhash:t,instructions:k})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((i,s)=>e[s].equals(i.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const i=r.toString();return e.has(i)?!1:(e.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(i=>{const s=Rf(r,i.secretKey);this._addSignature(i.publicKey,yr(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){re(e.length===64);const r=this.signatures.findIndex(i=>t.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=nt.Buffer.from(e)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,e){for(const{signature:r,publicKey:i}of this.signatures)if(r===null){if(e)return!1}else if(!Lf(r,t,i.toBytes()))return!1;return!0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(r&&!this._verifySignatures(i,e))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(t){const{signatures:e}=this,r=[];Se(r,e.length);const i=r.length+e.length*64+t.length,s=nt.Buffer.alloc(i);return re(e.length<256),nt.Buffer.from(r).copy(s,0),e.forEach(({signature:o},f)=>{o!==null&&(re(o.length===64,"signature has invalid length"),nt.Buffer.from(o).copy(s,r.length+f*64))}),t.copy(s,r.length+e.length*64),re(s.length<=dr,`Transaction too large: ${s.length} > ${dr}`),s}get keys(){return re(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return re(this.instructions.length===1),this.instructions[0].programId}get data(){return re(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=_e(e);let i=[];for(let s=0;s<r;s++){const o=e.slice(0,hs);e=e.slice(hs),i.push(Pt.encode(nt.Buffer.from(o)))}return Re.populate(Ve.from(e),i)}static populate(t,e=[]){const r=new Re;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((i,s)=>{const o={signature:i==Pt.encode(Ff)?null:Pt.decode(i),publicKey:t.accountKeys[s]};r.signatures.push(o)}),t.instructions.forEach(i=>{const s=i.accounts.map(o=>{const f=t.accountKeys[o];return{pubkey:f,isSigner:r.signatures.some(l=>l.publicKey.toString()===f.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new Ki({keys:s,programId:t.accountKeys[i.programIdIndex],data:Pt.decode(i.data)}))}),r._message=t,r._json=r.toJSON(),r}}const Df=160,zf=64,Kf=Df/zf,Hf=1e3/Kf;new et("SysvarC1ock11111111111111111111111111111111");new et("SysvarEpochSchedu1e111111111111111111111111");new et("Sysvar1nstructions1111111111111111111111111");new et("SysvarRecentB1ockHashes11111111111111111111");new et("SysvarRent111111111111111111111111111111111");new et("SysvarRewards111111111111111111111111111111");new et("SysvarS1otHashes111111111111111111111111111");new et("SysvarS1otHistory11111111111111111111111111");new et("SysvarStakeHistory1111111111111111111111111");function fr(n){return new Promise(t=>setTimeout(t,n))}const $f=ae("lamportsPerSignature"),ua=Y([tt("version"),tt("state"),ut("authorizedPubkey"),ut("nonce"),Y([$f],"feeCalculator")]);ua.span;class Qs{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=ua.decode(yr(t),0);return new Qs({authorizedPubkey:new et(e.authorizedPubkey),nonce:new et(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const jf=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},Wf=n=>t=>{const e=Ct(n,t),{encode:r,decode:i}=jf(e),s=e;return s.decode=(o,f)=>{const l=i(o,f);return Lu(nt.Buffer.from(l))},s.encode=(o,f,l)=>{const b=Ou(o,n);return r(b,f,l)},s},wr=Wf(8);Object.freeze({Create:{index:0,layout:Y([tt("instruction"),we("lamports"),we("space"),ut("programId")])},Assign:{index:1,layout:Y([tt("instruction"),ut("programId")])},Transfer:{index:2,layout:Y([tt("instruction"),wr("lamports")])},CreateWithSeed:{index:3,layout:Y([tt("instruction"),ut("base"),lr("seed"),we("lamports"),we("space"),ut("programId")])},AdvanceNonceAccount:{index:4,layout:Y([tt("instruction")])},WithdrawNonceAccount:{index:5,layout:Y([tt("instruction"),we("lamports")])},InitializeNonceAccount:{index:6,layout:Y([tt("instruction"),ut("authorized")])},AuthorizeNonceAccount:{index:7,layout:Y([tt("instruction"),ut("authorized")])},Allocate:{index:8,layout:Y([tt("instruction"),we("space")])},AllocateWithSeed:{index:9,layout:Y([tt("instruction"),ut("base"),lr("seed"),we("space"),ut("programId")])},AssignWithSeed:{index:10,layout:Y([tt("instruction"),ut("base"),lr("seed"),ut("programId")])},TransferWithSeed:{index:11,layout:Y([tt("instruction"),wr("lamports"),lr("seed"),ut("programId")])},UpgradeNonceAccount:{index:12,layout:Y([tt("instruction")])}});new et("11111111111111111111111111111111");new et("BPFLoader2111111111111111111111111111111111");function Gf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vf=Object.prototype.toString,Zf=Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t};function Ir(n,t){var e,r,i,s,o,f,l;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return Ir(n.toJSON(),t);if(l=Vf.call(n),l==="[object Array]"){for(i="[",r=n.length-1,e=0;e<r;e++)i+=Ir(n[e],!0)+",";return r>-1&&(i+=Ir(n[e],!0)),i+"]"}else if(l==="[object Object]"){for(s=Zf(n).sort(),r=s.length,i="",e=0;e<r;)o=s[e],f=Ir(n[o],!1),f!==void 0&&(i&&(i+=","),i+=JSON.stringify(o)+":"+f),e++;return"{"+i+"}"}else return JSON.stringify(n);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var Yf=function(n){var t=Ir(n,!1);if(t!==void 0)return""+t},Hi=Gf(Yf);const Br=32;function es(n){let t=0;for(;n>1;)n/=2,t++;return t}function Jf(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Xf{constructor(t,e,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=es(Jf(t+Br+1))-es(Br)-1,r=this.getSlotsInEpoch(e),i=t-(r-Br);return[e,i]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=e%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Br:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+es(Br)):this.slotsPerEpoch}}class $i extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class Z extends Error{constructor({code:t,message:e,data:r},i){super(i!=null?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Qf=globalThis.fetch;class tl extends wf{constructor(t,e,r){const i=s=>{const o=bf(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function el(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const ji=56;class Wi{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=el(rl,t),r=t.length-ji;re(r>=0,"lookup table is invalid"),re(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=Y([pe(ut(),i,"addresses")]).decode(t.slice(ji));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new et(e.authority[0]):void 0,addresses:s.map(o=>new et(o))}}}const rl={index:1,layout:Y([tt("typeIndex"),wr("deactivationSlot"),ae("lastExtendedSlot"),lt("lastExtendedStartIndex"),lt(),pe(ut(),tr(lt(),-1),"authority")])},nl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function sl(n){const t=n.match(nl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,i,s]=t,o=n.startsWith("https:")?"wss:":"ws:",f=i==null?null:parseInt(i.slice(1),10),l=f==null?"":`:${f+1}`;return`${o}//${r}${l}${s}`}const ne=Ur(Vs(et),K(),n=>new et(n)),fa=Zs([K(),Et("base64")]),ti=Ur(Vs(nt.Buffer),fa,n=>nt.Buffer.from(n[0],"base64")),il=30*1e3;function ol(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function yt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...i}=n;t=r,e=i}return{commitment:t,config:e}}function la(n){return me([F({jsonrpc:Et("2.0"),id:K(),result:n}),F({jsonrpc:Et("2.0"),id:K(),error:F({code:Nr(),message:K(),data:rt(Ku())})})])}const al=la(Nr());function ot(n){return Ur(la(n),al,t=>"error"in t?t:{...t,result:H(t.result,n)})}function Ot(n){return ot(F({context:F({slot:B()}),value:n}))}function Sn(n){return F({context:F({slot:B()}),value:n})}function rs(n,t){return n===0?new dn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new et(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Pt.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ve(t)}const cl=F({foundation:B(),foundationTerm:B(),initial:B(),taper:B(),terminal:B()}),ul=ot(W($(F({epoch:B(),effectiveSlot:B(),amount:B(),postBalance:B(),commission:rt($(B()))})))),fl=W(F({slot:B(),prioritizationFee:B()})),ll=F({total:B(),validator:B(),foundation:B(),epoch:B()}),hl=F({epoch:B(),slotIndex:B(),slotsInEpoch:B(),absoluteSlot:B(),blockHeight:rt(B()),transactionCount:rt(B())}),dl=F({slotsPerEpoch:B(),leaderScheduleSlotOffset:B(),warmup:Te(),firstNormalEpoch:B(),firstNormalSlot:B()}),pl=Vo(K(),W(B())),ir=$(me([F({}),K()])),gl=F({err:ir}),ml=Et("receivedSignature"),yl=F({"solana-core":K(),"feature-set":rt(B())}),Gi=Ot(F({err:$(me([F({}),K()])),logs:$(W(K())),accounts:rt($(W($(F({executable:Te(),owner:K(),lamports:B(),data:W(K()),rentEpoch:rt(B())}))))),unitsConsumed:rt(B()),returnData:rt($(F({programId:K(),data:Zs([K(),Et("base64")])})))})),wl=Ot(F({byIdentity:Vo(K(),W(B())),range:F({firstSlot:B(),lastSlot:B()})}));function bl(n,t,e,r,i,s){const o=e||Qf;let f;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(x,S)=>{const T=await new Promise((M,k)=>{try{r(x,S,(_,E)=>M([_,E]))}catch(_){k(_)}});return await o(...T)}),new Zu(async(x,S)=>{const T={method:"POST",body:x,agent:f,headers:Object.assign({"Content-Type":"application/json"},t||{},vh)};try{let M=5,k,_=500;for(;l?k=await l(n,T):k=await o(n,T),!(k.status!==429||i===!0||(M-=1,M===0));)console.log(`Server responded with ${k.status} ${k.statusText}.  Retrying after ${_}ms delay...`),await fr(_),_*=2;const E=await k.text();k.ok?S(null,E):S(new Error(`${k.status} ${k.statusText}: ${E}`))}catch(M){M instanceof Error&&S(M)}},{})}function vl(n){return(t,e)=>new Promise((r,i)=>{n.request(t,e,(s,o)=>{if(s){i(s);return}r(o)})})}function xl(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const i=t.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}e(o)})})}const _l=ot(cl),Sl=ot(ll),El=ot(fl),kl=ot(hl),Bl=ot(dl),Al=ot(pl),Il=ot(B()),Ml=Ot(F({total:B(),circulating:B(),nonCirculating:B(),nonCirculatingAccounts:W(ne)})),ds=F({amount:K(),uiAmount:$(B()),decimals:B(),uiAmountString:rt(K())}),Rl=Ot(W(F({address:ne,amount:K(),uiAmount:$(B()),decimals:B(),uiAmountString:rt(K())}))),Ll=Ot(W(F({pubkey:ne,account:F({executable:Te(),owner:ne,lamports:B(),data:ti,rentEpoch:B()})}))),ps=F({program:K(),parsed:Nr(),space:B()}),Tl=Ot(W(F({pubkey:ne,account:F({executable:Te(),owner:ne,lamports:B(),data:ps,rentEpoch:B()})}))),Cl=Ot(W(F({lamports:B(),address:ne}))),Cr=F({executable:Te(),owner:ne,lamports:B(),data:ti,rentEpoch:B()}),Ol=F({pubkey:ne,account:Cr}),Pl=Ur(me([Vs(nt.Buffer),ps]),me([fa,ps]),n=>Array.isArray(n)?H(n,ti):n),gs=F({executable:Te(),owner:ne,lamports:B(),data:Pl,rentEpoch:B()}),Nl=F({pubkey:ne,account:gs}),Ul=F({state:me([Et("active"),Et("inactive"),Et("activating"),Et("deactivating")]),active:B(),inactive:B()}),ql=ot(W(F({signature:K(),slot:B(),err:ir,memo:$(K()),blockTime:rt($(B()))}))),Fl=ot(W(F({signature:K(),slot:B(),err:ir,memo:$(K()),blockTime:rt($(B()))}))),Dl=F({subscription:B(),result:Sn(Cr)}),zl=F({pubkey:ne,account:Cr}),Kl=F({subscription:B(),result:Sn(zl)}),Hl=F({parent:B(),slot:B(),root:B()}),$l=F({subscription:B(),result:Hl}),jl=me([F({type:me([Et("firstShredReceived"),Et("completed"),Et("optimisticConfirmation"),Et("root")]),slot:B(),timestamp:B()}),F({type:Et("createdBank"),parent:B(),slot:B(),timestamp:B()}),F({type:Et("frozen"),slot:B(),timestamp:B(),stats:F({numTransactionEntries:B(),numSuccessfulTransactions:B(),numFailedTransactions:B(),maxTransactionsPerEntry:B()})}),F({type:Et("dead"),slot:B(),timestamp:B(),err:K()})]),Wl=F({subscription:B(),result:jl}),Gl=F({subscription:B(),result:Sn(me([gl,ml]))}),Vl=F({subscription:B(),result:B()}),Zl=F({pubkey:K(),gossip:$(K()),tpu:$(K()),rpc:$(K()),version:$(K())}),Vi=F({votePubkey:K(),nodePubkey:K(),activatedStake:B(),epochVoteAccount:Te(),epochCredits:W(Zs([B(),B(),B()])),commission:B(),lastVote:B(),rootSlot:$(B())}),Yl=ot(F({current:W(Vi),delinquent:W(Vi)})),Jl=me([Et("processed"),Et("confirmed"),Et("finalized")]),Xl=F({slot:B(),confirmations:$(B()),err:ir,confirmationStatus:rt(Jl)}),Ql=Ot(W($(Xl))),th=ot(B()),ha=F({accountKey:ne,writableIndexes:W(B()),readonlyIndexes:W(B())}),ei=F({signatures:W(K()),message:F({accountKeys:W(K()),header:F({numRequiredSignatures:B(),numReadonlySignedAccounts:B(),numReadonlyUnsignedAccounts:B()}),instructions:W(F({accounts:W(B()),data:K(),programIdIndex:B()})),recentBlockhash:K(),addressTableLookups:rt(W(ha))})}),da=F({pubkey:ne,signer:Te(),writable:Te(),source:rt(me([Et("transaction"),Et("lookupTable")]))}),pa=F({accountKeys:W(da),signatures:W(K())}),ga=F({parsed:Nr(),program:K(),programId:ne}),ma=F({accounts:W(ne),data:K(),programId:ne}),eh=me([ma,ga]),rh=me([F({parsed:Nr(),program:K(),programId:K()}),F({accounts:W(K()),data:K(),programId:K()})]),ya=Ur(eh,rh,n=>"accounts"in n?H(n,ma):H(n,ga)),wa=F({signatures:W(K()),message:F({accountKeys:W(da),instructions:W(ya),recentBlockhash:K(),addressTableLookups:rt($(W(ha)))})}),pn=F({accountIndex:B(),mint:K(),owner:rt(K()),uiTokenAmount:ds}),ba=F({writable:W(ne),readonly:W(ne)}),En=F({err:ir,fee:B(),innerInstructions:rt($(W(F({index:B(),instructions:W(F({accounts:W(B()),data:K(),programIdIndex:B()}))})))),preBalances:W(B()),postBalances:W(B()),logMessages:rt($(W(K()))),preTokenBalances:rt($(W(pn))),postTokenBalances:rt($(W(pn))),loadedAddresses:rt(ba),computeUnitsConsumed:rt(B())}),ri=F({err:ir,fee:B(),innerInstructions:rt($(W(F({index:B(),instructions:W(ya)})))),preBalances:W(B()),postBalances:W(B()),logMessages:rt($(W(K()))),preTokenBalances:rt($(W(pn))),postTokenBalances:rt($(W(pn))),loadedAddresses:rt(ba),computeUnitsConsumed:rt(B())}),_r=me([Et(0),Et("legacy")]),or=F({pubkey:K(),lamports:B(),postBalance:$(B()),rewardType:$(K()),commission:rt($(B()))}),nh=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(F({transaction:ei,meta:$(En),version:rt(_r)})),rewards:rt(W(or)),blockTime:$(B()),blockHeight:$(B())}))),sh=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),rewards:rt(W(or)),blockTime:$(B()),blockHeight:$(B())}))),ih=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(F({transaction:pa,meta:$(En),version:rt(_r)})),rewards:rt(W(or)),blockTime:$(B()),blockHeight:$(B())}))),oh=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(F({transaction:wa,meta:$(ri),version:rt(_r)})),rewards:rt(W(or)),blockTime:$(B()),blockHeight:$(B())}))),ah=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(F({transaction:pa,meta:$(ri),version:rt(_r)})),rewards:rt(W(or)),blockTime:$(B()),blockHeight:$(B())}))),ch=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),rewards:rt(W(or)),blockTime:$(B()),blockHeight:$(B())}))),uh=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),transactions:W(F({transaction:ei,meta:$(En)})),rewards:rt(W(or)),blockTime:$(B())}))),Zi=ot($(F({blockhash:K(),previousBlockhash:K(),parentSlot:B(),signatures:W(K()),blockTime:$(B())}))),ns=ot($(F({slot:B(),meta:$(En),blockTime:rt($(B())),transaction:ei,version:rt(_r)}))),$r=ot($(F({slot:B(),transaction:wa,meta:$(ri),blockTime:rt($(B())),version:rt(_r)}))),fh=Ot(F({blockhash:K(),feeCalculator:F({lamportsPerSignature:B()})})),lh=Ot(F({blockhash:K(),lastValidBlockHeight:B()})),hh=Ot(Te()),dh=F({slot:B(),numTransactions:B(),numSlots:B(),samplePeriodSecs:B()}),ph=ot(W(dh)),gh=Ot($(F({feeCalculator:F({lamportsPerSignature:B()})}))),mh=ot(K()),yh=ot(K()),wh=F({err:ir,logs:W(K()),signature:K()}),bh=F({result:Sn(wh),subscription:B()}),vh={"solana-client":"js/0.0.0-development"};class xh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const b={};return async x=>{const{commitment:S,config:T}=yt(x),M=this._buildArgs([],S,void 0,T),k=Hi(M);return b[k]=b[k]??(async()=>{try{const _=await this._rpcRequest("getBlockHeight",M),E=H(_,ot(B()));if("error"in E)throw new Z(E.error,"failed to get block height information");return E.result}finally{delete b[k]}})(),await b[k]}})();let r,i,s,o,f,l;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,i=e.httpHeaders,s=e.fetch,o=e.fetchMiddleware,f=e.disableRetryOnRateLimit,l=e.httpAgent),this._rpcEndpoint=ol(t),this._rpcWsEndpoint=r||sl(t),this._rpcClient=bl(t,i,s,o,f,l),this._rpcRequest=vl(this._rpcClient),this._rpcBatchRequest=xl(this._rpcClient),this._rpcWebSocket=new tl(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgs([t.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),f=H(o,Ot(B()));if("error"in f)throw new Z(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=H(e,ot($(B())));if("error"in r)throw new Z(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=H(t,ot(B()));if("error"in e)throw new Z(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=H(t,Il);if("error"in e)throw new Z(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),i=H(r,Ml);if("error"in i)throw new Z(i.error,"failed to get supply");return i.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenSupply",r),s=H(i,Ot(ds));if("error"in s)throw new Z(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenAccountBalance",r),s=H(i,Ot(ds));if("error"in s)throw new Z(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,r){const{commitment:i,config:s}=yt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const f=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",f),b=H(l,Ll);if("error"in b)throw new Z(b.error,`failed to get token accounts owned by account ${t.toBase58()}`);return b.result}async getParsedTokenAccountsByOwner(t,e,r){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),f=H(o,Tl);if("error"in f)throw new Z(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],i=await this._rpcRequest("getLargestAccounts",r),s=H(i,Cl);if("error"in s)throw new Z(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenLargestAccounts",r),s=H(i,Rl);if("error"in s)throw new Z(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgs([t.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),f=H(o,Ot($(Cr)));if("error"in f)throw new Z(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),f=H(o,Ot($(gs)));if("error"in f)throw new Z(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:i}=yt(e),s=t.map(b=>b.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),f=await this._rpcRequest("getMultipleAccounts",o),l=H(f,Ot(W($(gs))));if("error"in l)throw new Z(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:i}=yt(e),s=t.map(b=>b.toBase58()),o=this._buildArgs([s],r,"base64",i),f=await this._rpcRequest("getMultipleAccounts",o),l=H(f,Ot(W($(Cr))));if("error"in l)throw new Z(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:i,config:s}=yt(e),o=this._buildArgs([t.toBase58()],i,void 0,{...s,epoch:r??s?.epoch}),f=await this._rpcRequest("getStakeActivation",o),l=H(f,ot(Ul));if("error"in l)throw new Z(l.error,`failed to get Stake Activation ${t.toBase58()}`);return l.result}async getProgramAccounts(t,e){const{commitment:r,config:i}=yt(e),{encoding:s,...o}=i||{},f=this._buildArgs([t.toBase58()],r,s||"base64",o),l=await this._rpcRequest("getProgramAccounts",f),b=W(Ol),x=o.withContext===!0?H(l,Ot(b)):H(l,ot(b));if("error"in x)throw new Z(x.error,`failed to get accounts owned by program ${t.toBase58()}`);return x.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgs([t.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),f=H(o,ot(W(Nl)));if("error"in f)throw new Z(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const s=t;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);r=s.signature}let i;try{i=Pt.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return re(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,i,s=!1;const o=new Promise((l,b)=>{try{r=this.onSignature(e,(S,T)=>{r=void 0;const M={context:T,value:S};l({__type:$e.PROCESSED,response:M})},t);const x=new Promise(S=>{r==null?S():i=this._onSubscriptionStateChange(r,T=>{T==="subscribed"&&S()})});(async()=>{if(await x,s)return;const S=await this.getSignatureStatus(e);if(s||S==null)return;const{context:T,value:M}=S;if(M!=null)if(M?.err)b(M.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(M.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(M.confirmationStatus==="processed"||M.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:$e.PROCESSED,response:{context:T,value:M}})}})()}catch(x){b(x)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(S=>{const T=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let M=await T();if(!s){for(;M<=r;)if(await fr(1e3),s||(M=await T(),s))return;S({__type:$e.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:f,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),b=this.getCancellationPromise(e);let x;try{const S=await Promise.race([b,l,o]);if(S.__type===$e.PROCESSED)x=S.response;else throw new aa(i)}finally{s=!0,f()}return x}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let f=!1;const l=new Promise(M=>{let k=s,_=null;const E=async()=>{try{const{context:L,value:P}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:r});return _=L.slot,P?.nonce}catch{return k}};(async()=>{if(k=await E(),!f)for(;;){if(s!==k){M({__type:$e.NONCE_INVALID,slotInWhichNonceDidAdvance:_});return}if(await fr(2e3),f||(k=await E(),f))return}})()}),{abortConfirmation:b,confirmationPromise:x}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),S=this.getCancellationPromise(e);let T;try{const M=await Promise.race([S,x,l]);if(M.__type===$e.PROCESSED)T=M.response;else{let k;for(;;){const _=await this.getSignatureStatus(o);if(_==null)break;if(_.context.slot<(M.slotInWhichNonceDidAdvance??r)){await fr(400);continue}k=_;break}if(k?.value){const _=t||"finalized",{confirmationStatus:E}=k.value;switch(_){case"processed":case"recent":if(E!=="processed"&&E!=="confirmed"&&E!=="finalized")throw new Ar(o);break;case"confirmed":case"single":case"singleGossip":if(E!=="confirmed"&&E!=="finalized")throw new Ar(o);break;case"finalized":case"max":case"root":if(E!=="finalized")throw new Ar(o);break;default:(L=>{})(_)}T={context:k.context,value:{err:k.value.err}}}else throw new Ar(o)}}finally{f=!0,b()}return T}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const i=new Promise(l=>{let b=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{b=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:$e.TIMED_OUT,timeoutMs:b}),b)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let f;try{const l=await Promise.race([o,i]);if(l.__type===$e.PROCESSED)f=l.response;else throw new ca(e,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return f}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=H(t,ot(W(Zl)));if("error"in e)throw new Z(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),i=H(r,Yl);if("error"in i)throw new Z(i.error,"failed to get vote accounts");return i.result}async getSlot(t){const{commitment:e,config:r}=yt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlot",i),o=H(s,ot(B()));if("error"in o)throw new Z(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=yt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=H(s,ot(K()));if("error"in o)throw new Z(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],i=await this._rpcRequest("getSlotLeaders",r),s=H(i,ot(W(ne)));if("error"in s)throw new Z(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:r,value:i}=await this.getSignatureStatuses([t],e);re(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const i=await this._rpcRequest("getSignatureStatuses",r),s=H(i,Ql);if("error"in s)throw new Z(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:r}=yt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=H(s,ot(B()));if("error"in o)throw new Z(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),i=H(r,_l);if("error"in i)throw new Z(i.error,"failed to get inflation");return i.result}async getInflationReward(t,e,r){const{commitment:i,config:s}=yt(r),o=this._buildArgs([t.map(b=>b.toBase58())],i,void 0,{...s,epoch:e??s?.epoch}),f=await this._rpcRequest("getInflationReward",o),l=H(f,ul);if("error"in l)throw new Z(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=H(t,Sl);if("error"in e)throw new Z(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=yt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=H(s,kl);if("error"in o)throw new Z(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=H(t,Bl);if("error"in e)throw new Z(e.error,"failed to get epoch schedule");const r=e.result;return new Xf(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=H(t,Al);if("error"in e)throw new Z(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=H(i,th);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),i=H(r,fh);if("error"in i)throw new Z(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=H(e,ph);if("error"in r)throw new Z(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=H(i,gh);if("error"in s)throw new Z(s.error,"failed to get fee calculator");const{context:o,value:f}=s.result;return{context:o,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){const r=yr(t.serialize()).toString("base64"),i=this._buildArgs([r],e),s=await this._rpcRequest("getFeeForMessage",i),o=H(s,Ot($(B())));if("error"in o)throw new Z(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=H(i,El);if("error"in s)throw new Z(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=yt(t),i=this._buildArgs([],e,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=H(s,lh);if("error"in o)throw new Z(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgs([t],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),f=H(o,hh);if("error"in f)throw new Z(f.error,"failed to determine if the blockhash `"+t+"`is valid");return f.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=H(t,ot(yl));if("error"in e)throw new Z(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=H(t,ot(K()));if("error"in e)throw new Z(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const f=H(o,ih);if("error"in f)throw f.error;return f.result}case"none":{const f=H(o,sh);if("error"in f)throw f.error;return f.result}default:{const f=H(o,nh);if("error"in f)throw f.error;const{result:l}=f;return l?{...l,transactions:l.transactions.map(({transaction:b,meta:x,version:S})=>({meta:x,transaction:{...b,message:rs(S,b.message)},version:S}))}:null}}}catch(f){throw new Z(f,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const f=H(o,ah);if("error"in f)throw f.error;return f.result}case"none":{const f=H(o,ch);if("error"in f)throw f.error;return f.result}default:{const f=H(o,oh);if("error"in f)throw f.error;return f.result}}}catch(f){throw new Z(f,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:f,...l}=t;r=f,e=l}const i=this._buildArgs([],r,"base64",e),s=await this._rpcRequest("getBlockProduction",i),o=H(s,wl);if("error"in o)throw new Z(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgsAtLeastConfirmed([t],r,void 0,i),o=await this._rpcRequest("getTransaction",s),f=H(o,ns);if("error"in f)throw new Z(f.error,"failed to get transaction");const l=f.result;return l&&{...l,transaction:{...l.transaction,message:rs(l.version,l.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:i}=yt(e),s=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),f=H(o,$r);if("error"in f)throw new Z(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){const{commitment:r,config:i}=yt(e),s=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const b=H(l,$r);if("error"in b)throw new Z(b.error,"failed to get transactions");return b.result})}async getTransactions(t,e){const{commitment:r,config:i}=yt(e),s=t.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const b=H(l,ns);if("error"in b)throw new Z(b.error,"failed to get transactions");const x=b.result;return x&&{...x,transaction:{...x.transaction,message:rs(x.version,x.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getConfirmedBlock",r),s=H(i,uh);if("error"in s)throw new Z(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");const f={...o,transactions:o.transactions.map(({transaction:l,meta:b})=>{const x=new Ve(l.message);return{meta:b,transaction:{...l,message:x}}})};return{...f,transactions:f.transactions.map(({transaction:l,meta:b})=>({meta:b,transaction:Re.populate(l.message,l.signatures)}))}}async getBlocks(t,e,r){const i=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),s=await this._rpcRequest("getBlocks",i),o=H(s,ot(W(B())));if("error"in o)throw new Z(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=H(i,Zi);if("error"in s)throw new Z(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",r),s=H(i,Zi);if("error"in s)throw new Z(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getConfirmedTransaction",r),s=H(i,ns);if("error"in s)throw new Z(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const f=new Ve(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Re.populate(f,l)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",r),s=H(i,$r);if("error"in s)throw new Z(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const f=H(o,$r);if("error"in f)throw new Z(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(e--,!(e<=0||e<s));)try{const l=await this.getConfirmedBlockSignatures(e,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=H(s,ql);if("error"in o)throw new Z(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",i),o=H(s,Fl);if("error"in o)throw new Z(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=new Wi({key:t,state:Wi.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(t,e){const{context:r,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=Qs.fromAccountData(i.data)),{context:r,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),i=H(r,mh);if("error"in i)throw new Z(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await fr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=il;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await fr(Hf/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=yt(t),i=this._buildArgs([],e,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=H(s,Ot(B()));if("error"in o)throw new Z(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const _=t.serialize(),E=nt.Buffer.from(_).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const L=e||{};L.encoding="base64","commitment"in L||(L.commitment=this.commitment);const P=[E,L],R=await this._rpcRequest("simulateTransaction",P),O=H(R,Gi);if("error"in O)throw new Error("failed to simulate transaction: "+O.error.message);return O.result}let i;if(t instanceof Re){let k=t;i=new Re,i.feePayer=k.feePayer,i.instructions=t.instructions,i.nonceInfo=k.nonceInfo,i.signatures=k.signatures}else i=Re.populate(t),i._message=i._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let k=this._disableBlockhashCaching;for(;;){const _=await this._blockhashWithExpiryBlockHeight(k);if(i.lastValidBlockHeight=_.lastValidBlockHeight,i.recentBlockhash=_.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const E=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(E)&&!this._blockhashInfo.transactionSignatures.includes(E)){this._blockhashInfo.simulatedSignatures.push(E);break}else k=!0}}const o=i._compile(),f=o.serialize(),b=i._serialize(f).toString("base64"),x={encoding:"base64",commitment:this.commitment};if(r){const k=(Array.isArray(r)?r:o.nonProgramIds()).map(_=>_.toBase58());x.accounts={encoding:"base64",addresses:k}}s&&(x.sigVerify=!0);const S=[b,x],T=await this._rpcRequest("simulateTransaction",S),M=H(T,Gi);if("error"in M){let k;if("data"in M.error&&(k=M.error.data.logs,k&&Array.isArray(k))){const _=`
    `,E=_+k.join(_);console.error(M.error.message,E)}throw new $i("failed to simulate transaction: "+M.error.message,k)}return M.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(t.nonceInfo)t.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const f=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");const l=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=t.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(t,e){const r=yr(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},i=e&&e.skipPreflight,s=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[t,r],f=await this._rpcRequest("sendTransaction",o),l=H(f,yh);if("error"in l){let b;throw"data"in l.error&&(b=l.error.data.logs),new $i("failed to send transaction: "+l.error.message,b)}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(s=>{try{s(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const f=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:f,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[f]=i.callbacks,await this._updateSubscriptions()}catch(f){if(f instanceof Error&&console.error(`${o} error for argument`,s,f.message),!e())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(f){if(f instanceof Error&&console.error(`${o} error:`,f.message),!e())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(i=>{try{i(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=H(t,Dl);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,i=Hi([t.method,e],!0),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];re(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=H(t,Kl);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,i){const s=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=H(t,bh);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=H(t,$l);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=H(t,Wl);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,i){const s=e||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,i){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,i)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=H(t,Gl);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const i=this._buildArgs([t],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,f)=>{if(o.type==="status"){e(o.result,f);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(t,e,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],i,void 0,s),f=this._makeSubscription({callback:(l,b)=>{e(l,b);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=H(t,Vl);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Y([tt("instruction"),wr("recentSlot"),lt("bumpSeed")])},FreezeLookupTable:{index:1,layout:Y([tt("instruction")])},ExtendLookupTable:{index:2,layout:Y([tt("instruction"),wr(),pe(ut(),tr(tt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Y([tt("instruction")])},CloseLookupTable:{index:4,layout:Y([tt("instruction")])}});new et("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Y([lt("instruction"),tt("units"),tt("additionalFee")])},RequestHeapFrame:{index:1,layout:Y([lt("instruction"),tt("bytes")])},SetComputeUnitLimit:{index:2,layout:Y([lt("instruction"),tt("units")])},SetComputeUnitPrice:{index:3,layout:Y([lt("instruction"),wr("microLamports")])}});new et("ComputeBudget111111111111111111111111111111");Y([lt("numSignatures"),lt("padding"),xe("signatureOffset"),xe("signatureInstructionIndex"),xe("publicKeyOffset"),xe("publicKeyInstructionIndex"),xe("messageDataOffset"),xe("messageDataSize"),xe("messageInstructionIndex")]);new et("Ed25519SigVerify111111111111111111111111111");Xs.utils.isValidPrivateKey;Xs.getPublicKey;Y([lt("numSignatures"),xe("signatureOffset"),lt("signatureInstructionIndex"),xe("ethAddressOffset"),lt("ethAddressInstructionIndex"),xe("messageDataOffset"),xe("messageDataSize"),lt("messageInstructionIndex"),Ct(20,"ethAddress"),Ct(64,"signature"),lt("recoveryId")]);new et("KeccakSecp256k11111111111111111111111111111");var va;new et("StakeConfig11111111111111111111111111111111");class xa{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}va=xa;xa.default=new va(0,0,et.default);Object.freeze({Initialize:{index:0,layout:Y([tt("instruction"),Pf(),Nf()])},Authorize:{index:1,layout:Y([tt("instruction"),ut("newAuthorized"),tt("stakeAuthorizationType")])},Delegate:{index:2,layout:Y([tt("instruction")])},Split:{index:3,layout:Y([tt("instruction"),we("lamports")])},Withdraw:{index:4,layout:Y([tt("instruction"),we("lamports")])},Deactivate:{index:5,layout:Y([tt("instruction")])},Merge:{index:7,layout:Y([tt("instruction")])},AuthorizeWithSeed:{index:8,layout:Y([tt("instruction"),ut("newAuthorized"),tt("stakeAuthorizationType"),lr("authoritySeed"),ut("authorityOwner")])}});new et("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Y([tt("instruction"),Uf()])},Authorize:{index:1,layout:Y([tt("instruction"),ut("newAuthorized"),tt("voteAuthorizationType")])},Withdraw:{index:3,layout:Y([tt("instruction"),we("lamports")])},AuthorizeWithSeed:{index:10,layout:Y([tt("instruction"),qf()])}});new et("Vote111111111111111111111111111111111111111");new et("Va1idator1nfo111111111111111111111111111111");F({name:K(),website:rt(K()),details:rt(K()),keybaseUsername:rt(K())});new et("Vote111111111111111111111111111111111111111");Y([ut("nodePubkey"),ut("authorizedWithdrawer"),lt("commission"),ae(),pe(Y([ae("slot"),tt("confirmationCount")]),tr(tt(),-8),"votes"),lt("rootSlotValid"),ae("rootSlot"),ae(),pe(Y([ae("epoch"),ut("authorizedVoter")]),tr(tt(),-8),"authorizedVoters"),Y([pe(Y([ut("authorizedPubkey"),ae("epochOfLastAuthorizedSwitch"),ae("targetEpoch")]),32,"buf"),ae("idx"),lt("isEmpty")],"priorVoters"),ae(),pe(Y([ae("epoch"),ae("credits"),ae("prevCredits")]),tr(tt(),-8),"epochCredits"),Y([ae("slot"),ae("timestamp")],"lastTimestamp")]);var ni=Object.defineProperty,_h=Object.getOwnPropertyDescriptor,_a=Object.getOwnPropertyNames,Sh=Object.prototype.hasOwnProperty,Eh=(n,t)=>function(){return n&&(t=(0,n[_a(n)[0]])(n=0)),t},kh=(n,t)=>{for(var e in t)ni(n,e,{get:t[e],enumerable:!0})},Bh=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _a(t))!Sh.call(n,i)&&i!==e&&ni(n,i,{get:()=>t[i],enumerable:!(r=_h(t,i))||r.enumerable});return n},Ah=n=>Bh(ni({},"__esModule",{value:!0}),n),cr=(n,t,e)=>new Promise((r,i)=>{var s=l=>{try{f(e.next(l))}catch(b){i(b)}},o=l=>{try{f(e.throw(l))}catch(b){i(b)}},f=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);f((e=e.apply(n,t)).next())}),Sa={};kh(Sa,{default:()=>Ea,devDependencies:()=>Bs,files:()=>ws,gitHead:()=>Is,license:()=>Ss,main:()=>vs,module:()=>xs,name:()=>ms,peerDependencies:()=>ks,publishConfig:()=>Es,scripts:()=>As,type:()=>bs,types:()=>_s,version:()=>ys});var ms,ys,ws,bs,vs,xs,_s,Ss,Es,ks,Bs,As,Is,Ea,Ih=Eh({"package.json"(){ms="@particle-network/solana-wallet",ys="1.2.1",ws=["es","lib","LICENSE"],bs="module",vs="lib/index.js",xs="es/index.js",_s="lib/types/index.d.ts",Ss="Apache-2.0",Es={access:"public"},ks={"@particle-network/auth":"*","@solana/web3.js":"^1.50.1",bs58:"^4.0.1"},Bs={"@particle-network/auth":"^1.2.2","@solana/web3.js":"^1.50.1","@types/bs58":"^4.0.1",bs58:"^4.0.1","ts-loader":"^9.3.1","webpack-cli":"^4.10.0"},As={clean:"shx rm -rf lib/* && shx rm -rf es/*",package:`shx echo '{ "type": "commonjs" }' > lib/package.json`,build:"yarn clean && node ./esBuild.js && tsc --emitDeclarationOnly -p tsconfig.json && yarn package","build:min.js":"webpack",version:"yarn build"},Is="cc999e430ebfb1dd821783f7cf099ddd51f3495a",Ea={name:ms,version:ys,files:ws,type:bs,main:vs,module:xs,types:_s,license:Ss,publishConfig:Es,peerDependencies:ks,devDependencies:Bs,scripts:As,gitHead:Is}}});function Mh(){return`web_${(Ih(),Ah(Sa)).version}`}var Oh=class{constructor(n){this.auth=n,this.isParticleNetwork=!0,this.name="Particle",this.url="https://particle.network",this.icon="https://static.particle.network/wallet-icons/Particle.png",this.events=new Ia.EventEmitter,this.auth=n,this._connecting=!1;const t=this.auth.getUserInfo();if(t){const e=t.wallets.find(r=>r.chain_name==="solana"&&r.public_address.length>0);e?this._publicKey=new et(e.public_address):this._publicKey=null}else this._publicKey=null;this.auth.on("connect",e=>{const r=e.wallets.find(i=>i.chain_name==="solana"&&i.public_address.length>0);r&&(this._publicKey=new et(r.public_address),this.events.emit("connect",this._publicKey))}),this.auth.on("disconnect",()=>{this._publicKey=null,this.events.emit("disconnect")}),typeof window<"u"&&window.particle&&(window.particle.solanaWallet=this)}get version(){return Mh()}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}get connecting(){return this._connecting}get connected(){return this._publicKey!==null}get publicKey(){return this._publicKey}connect(n){return cr(this,null,function*(){try{this._connecting=!0;let t=this.auth.getWallet();return t?(this._publicKey=new et(t.public_address),Promise.resolve()):(yield this.auth.login(n),t=this.auth.getWallet(),t?(this._publicKey=new et(t.public_address),Promise.resolve()):Promise.reject("wallet create failed"))}catch(t){return Promise.reject(t)}finally{this._connecting=!1}})}disconnect(){return cr(this,null,function*(){return yield this.auth.logout(),this._publicKey=null,Promise.resolve()})}signTransaction(n){return cr(this,null,function*(){const t=yield this.auth.sign("signTransaction",Pt.encode(n.serialize({requireAllSignatures:!1,verifySignatures:!1})));return Re.from(nt.Buffer.from(t,"base64"))})}signAllTransactions(n){return cr(this,null,function*(){return(yield this.auth.signAllTransactions(n.map(e=>Pt.encode(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))))).map(e=>Re.from(nt.Buffer.from(e,"base64")))})}signAndSendTransaction(n){return cr(this,null,function*(){return this.auth.sendTransaction(Pt.encode(n.serialize({requireAllSignatures:!1,verifySignatures:!1})))})}signMessage(n){return cr(this,null,function*(){const t=yield this.auth.sign("signMessage",Pt.encode(n));return nt.Buffer.from(t,"base64")})}getConnection(n){const t=`${Ma()}/solana`;return new xh(`${t}?chainId=${this.auth.getChainId()}&projectUuid=${this.auth.config.projectId}&projectKey=${this.auth.config.clientKey}`,{commitment:n?.commitment,wsEndpoint:n?.wsEndpoint,httpHeaders:{Authorization:this.auth.basicCredentials()},fetch:n?.fetch,fetchMiddleware:n?.fetchMiddleware,disableRetryOnRateLimit:n?.disableRetryOnRateLimit,confirmTransactionInitialTimeout:n?.confirmTransactionInitialTimeout})}};export{Uh as ParticleNetwork,Oh as SolanaWallet};
